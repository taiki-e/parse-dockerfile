{
  "parser_directives": {
    "syntax": {
      "start": 2,
      "value": {
        "span": {
          "start": 9,
          "end": 42
        },
        "value": "docker/dockerfile-upstream:master"
      }
    },
    "escape": null,
    "check": null
  },
  "instructions": [
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 44,
          "end": 47
        }
      },
      "arguments": {
        "span": {
          "start": 48,
          "end": 67
        },
        "value": "RUNC_VERSION=v1.3.3"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 68,
          "end": 71
        }
      },
      "arguments": {
        "span": {
          "start": 72,
          "end": 97
        },
        "value": "CONTAINERD_VERSION=v2.1.4"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 185,
          "end": 188
        }
      },
      "arguments": {
        "span": {
          "start": 189,
          "end": 221
        },
        "value": "CONTAINERD_ALT_VERSION_20=v2.0.6"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 222,
          "end": 225
        }
      },
      "arguments": {
        "span": {
          "start": 226,
          "end": 259
        },
        "value": "CONTAINERD_ALT_VERSION_17=v1.7.28"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 260,
          "end": 263
        }
      },
      "arguments": {
        "span": {
          "start": 264,
          "end": 287
        },
        "value": "REGISTRY_VERSION=v2.8.3"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 288,
          "end": 291
        }
      },
      "arguments": {
        "span": {
          "start": 292,
          "end": 318
        },
        "value": "ROOTLESSKIT_VERSION=v2.3.5"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 319,
          "end": 322
        }
      },
      "arguments": {
        "span": {
          "start": 323,
          "end": 341
        },
        "value": "CNI_VERSION=v1.8.0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 342,
          "end": 345
        }
      },
      "arguments": {
        "span": {
          "start": 346,
          "end": 380
        },
        "value": "STARGZ_SNAPSHOTTER_VERSION=v0.15.1"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 381,
          "end": 384
        }
      },
      "arguments": {
        "span": {
          "start": 385,
          "end": 407
        },
        "value": "NERDCTL_VERSION=v2.1.2"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 408,
          "end": 411
        }
      },
      "arguments": {
        "span": {
          "start": 412,
          "end": 434
        },
        "value": "DNSNAME_VERSION=v1.3.1"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 435,
          "end": 438
        }
      },
      "arguments": {
        "span": {
          "start": 439,
          "end": 459
        },
        "value": "NYDUS_VERSION=v2.3.7"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 460,
          "end": 463
        }
      },
      "arguments": {
        "span": {
          "start": 464,
          "end": 506
        },
        "value": "MINIO_VERSION=RELEASE.2025-09-07T16-13-09Z"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 507,
          "end": 510
        }
      },
      "arguments": {
        "span": {
          "start": 511,
          "end": 556
        },
        "value": "MINIO_MC_VERSION=RELEASE.2025-08-13T08-35-41Z"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 557,
          "end": 560
        }
      },
      "arguments": {
        "span": {
          "start": 561,
          "end": 583
        },
        "value": "AZURITE_VERSION=3.33.0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 584,
          "end": 587
        }
      },
      "arguments": {
        "span": {
          "start": 588,
          "end": 612
        },
        "value": "GOTESTSUM_VERSION=v1.9.0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 613,
          "end": 616
        }
      },
      "arguments": {
        "span": {
          "start": 617,
          "end": 638
        },
        "value": "DELVE_VERSION=v1.23.1"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 640,
          "end": 643
        }
      },
      "arguments": {
        "span": {
          "start": 644,
          "end": 662
        },
        "value": "EXPORT_BASE=alpine"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 663,
          "end": 666
        }
      },
      "arguments": {
        "span": {
          "start": 667,
          "end": 686
        },
        "value": "ALPINE_VERSION=3.22"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 687,
          "end": 690
        }
      },
      "arguments": {
        "span": {
          "start": 691,
          "end": 711
        },
        "value": "UBUNTU_VERSION=24.04"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 713,
          "end": 716
        }
      },
      "arguments": {
        "span": {
          "start": 717,
          "end": 732
        },
        "value": "GO_VERSION=1.25"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 733,
          "end": 736
        }
      },
      "arguments": {
        "span": {
          "start": 737,
          "end": 753
        },
        "value": "XX_VERSION=1.7.0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 754,
          "end": 757
        }
      },
      "arguments": {
        "span": {
          "start": 758,
          "end": 772
        },
        "value": "BUILDKIT_DEBUG"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 807,
          "end": 811
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 812,
          "end": 848
        },
        "value": "quay.io/minio/minio:${MINIO_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 849,
            "end": 851
          }
        },
        {
          "span": {
            "start": 852,
            "end": 857
          },
          "value": "minio"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 858,
          "end": 862
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 863,
          "end": 899
        },
        "value": "quay.io/minio/mc:${MINIO_MC_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 900,
            "end": 902
          }
        },
        {
          "span": {
            "start": 903,
            "end": 911
          },
          "value": "minio-mc"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 952,
          "end": 956
        }
      },
      "options": [
        {
          "flag_start": 957,
          "name": {
            "span": {
              "start": 959,
              "end": 967
            },
            "value": "platform"
          },
          "value": {
            "span": {
              "start": 968,
              "end": 982
            },
            "value": "$BUILDPLATFORM"
          }
        }
      ],
      "image": {
        "span": {
          "start": 983,
          "end": 1010
        },
        "value": "tonistiigi/xx:${XX_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 1011,
            "end": 1013
          }
        },
        {
          "span": {
            "start": 1014,
            "end": 1016
          },
          "value": "xx"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 1056,
          "end": 1060
        }
      },
      "options": [
        {
          "flag_start": 1061,
          "name": {
            "span": {
              "start": 1063,
              "end": 1071
            },
            "value": "platform"
          },
          "value": {
            "span": {
              "start": 1072,
              "end": 1086
            },
            "value": "$BUILDPLATFORM"
          }
        }
      ],
      "image": {
        "span": {
          "start": 1087,
          "end": 1131
        },
        "value": "golang:${GO_VERSION}-alpine${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 1132,
            "end": 1134
          }
        },
        {
          "span": {
            "start": 1135,
            "end": 1143
          },
          "value": "golatest"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 1195,
          "end": 1199
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 1200,
          "end": 1208
        },
        "value": "golatest"
      },
      "as_": [
        {
          "span": {
            "start": 1209,
            "end": 1211
          }
        },
        {
          "span": {
            "start": 1212,
            "end": 1224
          },
          "value": "gobuild-base"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 1225,
          "end": 1228
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 1229,
            "end": 1295
          },
          "value": "apk add --no-cache file bash clang lld musl-dev pkgconfig git make"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 1296,
          "end": 1300
        }
      },
      "options": [
        {
          "flag_start": 1301,
          "name": {
            "span": {
              "start": 1303,
              "end": 1307
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 1308,
          "name": {
            "span": {
              "start": 1310,
              "end": 1314
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 1315,
              "end": 1317
            },
            "value": "xx"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 1318,
              "end": 1319
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 1320,
          "end": 1321
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 1349,
          "end": 1353
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 1354,
          "end": 1366
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 1367,
            "end": 1369
          }
        },
        {
          "span": {
            "start": 1370,
            "end": 1374
          },
          "value": "runc"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 1375,
          "end": 1382
        }
      },
      "arguments": {
        "span": {
          "start": 1383,
          "end": 1425
        },
        "value": "$GOPATH/src/github.com/opencontainers/runc"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 1426,
          "end": 1429
        }
      },
      "arguments": {
        "span": {
          "start": 1430,
          "end": 1442
        },
        "value": "RUNC_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 1443,
          "end": 1446
        }
      },
      "options": [
        {
          "flag_start": 1447,
          "name": {
            "span": {
              "start": 1449,
              "end": 1461
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 1462,
              "end": 1466
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 1467,
              "end": 1525
            },
            "value": "\"https://github.com/opencontainers/runc.git#$RUNC_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 1526,
          "end": 1527
        },
        "value": "."
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 1528,
          "end": 1531
        }
      },
      "arguments": {
        "span": {
          "start": 1532,
          "end": 1546
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 1652,
          "end": 1655
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 1656,
            "end": 1817
          },
          "value": "set -e; xx-apk add musl-dev gcc libseccomp-dev libseccomp-static; \\\n  [ \"$(xx-info arch)\" != \"ppc64le\" ] || XX_CC_PREFER_LINKER=ld xx-clang --setup-target-triple"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 1818,
          "end": 1821
        }
      },
      "options": [
        {
          "flag_start": 1822,
          "name": {
            "span": {
              "start": 1824,
              "end": 1829
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 1830,
              "end": 1860
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 1866,
            "end": 1866
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 1867,
            "end": 2129
          },
          "expand": true,
          "value": "  set -ex\n  CGO_ENABLED=1 xx-go build -mod=vendor -ldflags '-extldflags -static' -tags 'apparmor seccomp netgo cgo static_build osusergo' -o /usr/bin/runc ./\n  xx-verify --static /usr/bin/runc\n  if [ \"$(xx-info os)\" = \"linux\" ]; then /usr/bin/runc --version; fi\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 2134,
          "end": 2138
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 2139,
          "end": 2151
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 2152,
            "end": 2154
          }
        },
        {
          "span": {
            "start": 2155,
            "end": 2168
          },
          "value": "buildkit-base"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 2169,
          "end": 2176
        }
      },
      "arguments": {
        "span": {
          "start": 2177,
          "end": 2181
        },
        "value": "/src"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 2182,
          "end": 2185
        }
      },
      "arguments": {
        "span": {
          "start": 2186,
          "end": 2205
        },
        "value": "GOFLAGS=-mod=vendor"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 2266,
          "end": 2270
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 2271,
          "end": 2284
        },
        "value": "buildkit-base"
      },
      "as_": [
        {
          "span": {
            "start": 2285,
            "end": 2287
          }
        },
        {
          "span": {
            "start": 2288,
            "end": 2304
          },
          "value": "buildkit-version"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 2352,
          "end": 2355
        }
      },
      "options": [
        {
          "flag_start": 2356,
          "name": {
            "span": {
              "start": 2358,
              "end": 2363
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 2364,
              "end": 2372
            },
            "value": "target=."
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 2380,
            "end": 2380
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 2381,
            "end": 3057
          },
          "expand": false,
          "value": "  git rev-parse HEAD 2>/dev/null || {\n    echo >&2 \"Failed to get git revision, make sure --build-arg BUILDKIT_CONTEXT_KEEP_GIT_DIR=1 is set when building from Git directly\"\n    exit 1\n  }\n  set -ex\n  export PKG=github.com/moby/buildkit VERSION=$(git describe --match 'v[0-9]*' --dirty='.m' --always --tags) REVISION=$(git rev-parse HEAD)$(if ! git diff --no-ext-diff --quiet --exit-code; then echo .m; fi) COMMIT_DATE=$(git show -s --format=%cI HEAD);\n  echo \"-X ${PKG}/version.Version=${VERSION} -X ${PKG}/version.Revision=${REVISION} -X ${PKG}/version.Package=${PKG}\" > /tmp/.ldflags;\n  echo -n \"${VERSION}\" > /tmp/.version;\n  echo -n \"${COMMIT_DATE}\" > /tmp/.commit_date;\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 3096,
          "end": 3100
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 3101,
          "end": 3114
        },
        "value": "buildkit-base"
      },
      "as_": [
        {
          "span": {
            "start": 3115,
            "end": 3117
          }
        },
        {
          "span": {
            "start": 3118,
            "end": 3126
          },
          "value": "buildctl"
        }
      ]
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 3127,
          "end": 3130
        }
      },
      "arguments": {
        "span": {
          "start": 3131,
          "end": 3144
        },
        "value": "CGO_ENABLED=0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 3145,
          "end": 3148
        }
      },
      "arguments": {
        "span": {
          "start": 3149,
          "end": 3163
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 3164,
          "end": 3167
        }
      },
      "arguments": {
        "span": {
          "start": 3168,
          "end": 3180
        },
        "value": "GOBUILDFLAGS"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 3181,
          "end": 3184
        }
      },
      "options": [
        {
          "flag_start": 3185,
          "name": {
            "span": {
              "start": 3187,
              "end": 3192
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 3193,
              "end": 3201
            },
            "value": "target=."
          }
        },
        {
          "flag_start": 3202,
          "name": {
            "span": {
              "start": 3204,
              "end": 3209
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 3210,
              "end": 3240
            },
            "value": "target=/root/.cache,type=cache"
          }
        },
        {
          "flag_start": 3245,
          "name": {
            "span": {
              "start": 3247,
              "end": 3252
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 3253,
              "end": 3282
            },
            "value": "target=/go/pkg/mod,type=cache"
          }
        },
        {
          "flag_start": 3287,
          "name": {
            "span": {
              "start": 3289,
              "end": 3294
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 3295,
              "end": 3358
            },
            "value": "source=/tmp/.ldflags,target=/tmp/.ldflags,from=buildkit-version"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 3364,
            "end": 3364
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 3365,
            "end": 3585
          },
          "expand": true,
          "value": "  set -ex\n  xx-go build ${GOBUILDFLAGS} -ldflags \"$(cat /tmp/.ldflags)\" -o /usr/bin/buildctl ./cmd/buildctl\n  xx-verify --static /usr/bin/buildctl\n  if [ \"$(xx-info os)\" = \"linux\" ]; then /usr/bin/buildctl --version; fi\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 3623,
          "end": 3627
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 3628,
          "end": 3641
        },
        "value": "buildkit-base"
      },
      "as_": [
        {
          "span": {
            "start": 3642,
            "end": 3644
          }
        },
        {
          "span": {
            "start": 3645,
            "end": 3654
          },
          "value": "buildkitd"
        }
      ]
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 3729,
          "end": 3732
        }
      },
      "arguments": {
        "span": {
          "start": 3733,
          "end": 3747
        },
        "value": "BUILDKITD_TAGS"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 3748,
          "end": 3751
        }
      },
      "arguments": {
        "span": {
          "start": 3752,
          "end": 3766
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 3767,
          "end": 3770
        }
      },
      "arguments": {
        "span": {
          "start": 3771,
          "end": 3783
        },
        "value": "GOBUILDFLAGS"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 3784,
          "end": 3787
        }
      },
      "arguments": {
        "span": {
          "start": 3788,
          "end": 3810
        },
        "value": "VERIFYFLAGS=\"--static\""
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 3811,
          "end": 3814
        }
      },
      "arguments": {
        "span": {
          "start": 3815,
          "end": 3828
        },
        "value": "CGO_ENABLED=0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 3829,
          "end": 3832
        }
      },
      "arguments": {
        "span": {
          "start": 3833,
          "end": 3847
        },
        "value": "BUILDKIT_DEBUG"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 3848,
          "end": 3851
        }
      },
      "arguments": {
        "span": {
          "start": 3852,
          "end": 3892
        },
        "value": "GOGCFLAGS=${BUILDKIT_DEBUG:+\"all=-N -l\"}"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 3893,
          "end": 3896
        }
      },
      "options": [
        {
          "flag_start": 3897,
          "name": {
            "span": {
              "start": 3899,
              "end": 3904
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 3905,
              "end": 3913
            },
            "value": "target=."
          }
        },
        {
          "flag_start": 3914,
          "name": {
            "span": {
              "start": 3916,
              "end": 3921
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 3922,
              "end": 3952
            },
            "value": "target=/root/.cache,type=cache"
          }
        },
        {
          "flag_start": 3957,
          "name": {
            "span": {
              "start": 3959,
              "end": 3964
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 3965,
              "end": 3994
            },
            "value": "target=/go/pkg/mod,type=cache"
          }
        },
        {
          "flag_start": 3999,
          "name": {
            "span": {
              "start": 4001,
              "end": 4006
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 4007,
              "end": 4070
            },
            "value": "source=/tmp/.ldflags,target=/tmp/.ldflags,from=buildkit-version"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 4076,
            "end": 4076
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 4077,
            "end": 5137
          },
          "expand": true,
          "value": "  set -ex\n  xx-go build ${GOBUILDFLAGS} -gcflags=\"${GOGCFLAGS}\" -ldflags \"$(cat /tmp/.ldflags) -extldflags '-static'\" -tags \"osusergo netgo static_build seccomp ${BUILDKITD_TAGS}\" -o /usr/bin/buildkitd ./cmd/buildkitd\n  xx-verify ${VERIFYFLAGS} /usr/bin/buildkitd\n\n  # buildkitd --version can be flaky when running through emulation related to\n  # https://github.com/moby/buildkit/pull/4491. Retry a few times as a workaround.\n  set +ex\n  if [ \"$(xx-info os)\" = \"linux\" ]; then\n    max_retries=5\n    for attempt in $(seq \"$max_retries\"); do\n      timeout 3 /usr/bin/buildkitd --version\n      exitcode=$?\n      if ! xx-info is-cross; then\n        exit $exitcode\n      elif [ $exitcode -eq 0 ]; then\n        break\n      elif [ $exitcode -eq 124 ] || [ $exitcode -eq 143 ]; then\n        echo \"WARN: buildkitd --version timed out ($attempt/$max_retries)\"\n        if [ \"$attempt\" -eq \"$max_retries\" ]; then\n          exit $exitcode\n        fi\n      else\n        echo \"ERROR: buildkitd --version failed with exit code $exitcode\"\n      fi\n      sleep 1\n    done\n  fi\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 5190,
          "end": 5194
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 5195,
          "end": 5207
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 5208,
            "end": 5210
          }
        },
        {
          "span": {
            "start": 5211,
            "end": 5218
          },
          "value": "dnsname"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 5219,
          "end": 5226
        }
      },
      "arguments": {
        "span": {
          "start": 5227,
          "end": 5264
        },
        "value": "/go/src/github.com/containers/dnsname"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 5265,
          "end": 5268
        }
      },
      "arguments": {
        "span": {
          "start": 5269,
          "end": 5284
        },
        "value": "DNSNAME_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 5285,
          "end": 5288
        }
      },
      "options": [
        {
          "flag_start": 5289,
          "name": {
            "span": {
              "start": 5291,
              "end": 5303
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 5304,
              "end": 5308
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 5309,
              "end": 5369
            },
            "value": "\"https://github.com/containers/dnsname.git#$DNSNAME_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 5370,
          "end": 5371
        },
        "value": "."
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 5372,
          "end": 5375
        }
      },
      "arguments": {
        "span": {
          "start": 5376,
          "end": 5390
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 5391,
          "end": 5394
        }
      },
      "options": [
        {
          "flag_start": 5395,
          "name": {
            "span": {
              "start": 5397,
              "end": 5402
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 5403,
              "end": 5433
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 5440,
            "end": 5553
          },
          "value": "CGO_ENABLED=0 xx-go build -o /usr/bin/dnsname ./plugins/meta/dnsname && \\\n    xx-verify --static /usr/bin/dnsname"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 5555,
          "end": 5559
        }
      },
      "options": [
        {
          "flag_start": 5560,
          "name": {
            "span": {
              "start": 5562,
              "end": 5570
            },
            "value": "platform"
          },
          "value": {
            "span": {
              "start": 5571,
              "end": 5585
            },
            "value": "$BUILDPLATFORM"
          }
        }
      ],
      "image": {
        "span": {
          "start": 5586,
          "end": 5610
        },
        "value": "alpine:${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 5611,
            "end": 5613
          }
        },
        {
          "span": {
            "start": 5614,
            "end": 5625
          },
          "value": "cni-plugins"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 5626,
          "end": 5629
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 5630,
            "end": 5653
          },
          "value": "apk add --no-cache curl"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 5654,
          "end": 5658
        }
      },
      "options": [
        {
          "flag_start": 5659,
          "name": {
            "span": {
              "start": 5661,
              "end": 5665
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 5666,
              "end": 5668
            },
            "value": "xx"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 5669,
              "end": 5670
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 5671,
          "end": 5672
        },
        "value": "/"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 5673,
          "end": 5676
        }
      },
      "arguments": {
        "span": {
          "start": 5677,
          "end": 5688
        },
        "value": "CNI_VERSION"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 5689,
          "end": 5692
        }
      },
      "arguments": {
        "span": {
          "start": 5693,
          "end": 5701
        },
        "value": "TARGETOS"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 5702,
          "end": 5705
        }
      },
      "arguments": {
        "span": {
          "start": 5706,
          "end": 5716
        },
        "value": "TARGETARCH"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 5717,
          "end": 5720
        }
      },
      "arguments": {
        "span": {
          "start": 5721,
          "end": 5735
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 5736,
          "end": 5743
        }
      },
      "arguments": {
        "span": {
          "start": 5744,
          "end": 5756
        },
        "value": "/opt/cni/bin"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 5757,
          "end": 5760
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 5761,
            "end": 5918
          },
          "value": "curl -fsSL https://github.com/containernetworking/plugins/releases/download/${CNI_VERSION}/cni-plugins-${TARGETOS}-${TARGETARCH}-${CNI_VERSION}.tgz | tar xzv"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 5919,
          "end": 5922
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 5923,
            "end": 5968
          },
          "value": "xx-verify --static bridge loopback host-local"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 5969,
          "end": 5973
        }
      },
      "options": [
        {
          "flag_start": 5974,
          "name": {
            "span": {
              "start": 5976,
              "end": 5980
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 5981,
          "name": {
            "span": {
              "start": 5983,
              "end": 5987
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 5988,
              "end": 5995
            },
            "value": "dnsname"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 5996,
              "end": 6012
            },
            "value": "/usr/bin/dnsname"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6013,
          "end": 6026
        },
        "value": "/opt/cni/bin/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 6028,
          "end": 6032
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 6033,
          "end": 6040
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 6041,
            "end": 6043
          }
        },
        {
          "span": {
            "start": 6044,
            "end": 6062
          },
          "value": "cni-plugins-export"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6063,
          "end": 6067
        }
      },
      "options": [
        {
          "flag_start": 6068,
          "name": {
            "span": {
              "start": 6070,
              "end": 6074
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 6075,
          "name": {
            "span": {
              "start": 6077,
              "end": 6081
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6082,
              "end": 6093
            },
            "value": "cni-plugins"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6094,
              "end": 6113
            },
            "value": "/opt/cni/bin/bridge"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6114,
          "end": 6134
        },
        "value": "/buildkit-cni-bridge"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6135,
          "end": 6139
        }
      },
      "options": [
        {
          "flag_start": 6140,
          "name": {
            "span": {
              "start": 6142,
              "end": 6146
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 6147,
          "name": {
            "span": {
              "start": 6149,
              "end": 6153
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6154,
              "end": 6165
            },
            "value": "cni-plugins"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6166,
              "end": 6187
            },
            "value": "/opt/cni/bin/loopback"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6188,
          "end": 6210
        },
        "value": "/buildkit-cni-loopback"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6211,
          "end": 6215
        }
      },
      "options": [
        {
          "flag_start": 6216,
          "name": {
            "span": {
              "start": 6218,
              "end": 6222
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 6223,
          "name": {
            "span": {
              "start": 6225,
              "end": 6229
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6230,
              "end": 6241
            },
            "value": "cni-plugins"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6242,
              "end": 6265
            },
            "value": "/opt/cni/bin/host-local"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6266,
          "end": 6290
        },
        "value": "/buildkit-cni-host-local"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6291,
          "end": 6295
        }
      },
      "options": [
        {
          "flag_start": 6296,
          "name": {
            "span": {
              "start": 6298,
              "end": 6302
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 6303,
          "name": {
            "span": {
              "start": 6305,
              "end": 6309
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6310,
              "end": 6321
            },
            "value": "cni-plugins"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6322,
              "end": 6343
            },
            "value": "/opt/cni/bin/firewall"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6344,
          "end": 6366
        },
        "value": "/buildkit-cni-firewall"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 6368,
          "end": 6372
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 6373,
          "end": 6380
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 6381,
            "end": 6383
          }
        },
        {
          "span": {
            "start": 6384,
            "end": 6411
          },
          "value": "cni-plugins-export-squashed"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6412,
          "end": 6416
        }
      },
      "options": [
        {
          "flag_start": 6417,
          "name": {
            "span": {
              "start": 6419,
              "end": 6423
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6424,
              "end": 6442
            },
            "value": "cni-plugins-export"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6443,
              "end": 6444
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6445,
          "end": 6446
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 6448,
          "end": 6452
        }
      },
      "options": [
        {
          "flag_start": 6453,
          "name": {
            "span": {
              "start": 6455,
              "end": 6463
            },
            "value": "platform"
          },
          "value": {
            "span": {
              "start": 6464,
              "end": 6478
            },
            "value": "$BUILDPLATFORM"
          }
        }
      ],
      "image": {
        "span": {
          "start": 6479,
          "end": 6503
        },
        "value": "alpine:${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 6504,
            "end": 6506
          }
        },
        {
          "span": {
            "start": 6507,
            "end": 6520
          },
          "value": "binfmt-filter"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6606,
          "end": 6610
        }
      },
      "options": [
        {
          "flag_start": 6611,
          "name": {
            "span": {
              "start": 6613,
              "end": 6617
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 6618,
          "name": {
            "span": {
              "start": 6620,
              "end": 6624
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6625,
              "end": 6734
            },
            "value": "tonistiigi/binfmt:buildkit-v10.0.4-57@sha256:370775754cd56094fff210b44968bf15777aed7eb3302df4f7ab2b647630899e"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6735,
              "end": 6736
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6737,
          "end": 6742
        },
        "value": "/out/"
      }
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 6743,
          "end": 6750
        }
      },
      "arguments": {
        "span": {
          "start": 6751,
          "end": 6756
        },
        "value": "/out/"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 6757,
          "end": 6760
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 6761,
            "end": 6836
          },
          "value": "rm -f buildkit-qemu-loongarch64 buildkit-qemu-mips64 buildkit-qemu-mips64el"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 6838,
          "end": 6842
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 6843,
          "end": 6850
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 6851,
            "end": 6853
          }
        },
        {
          "span": {
            "start": 6854,
            "end": 6868
          },
          "value": "binaries-linux"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6869,
          "end": 6873
        }
      },
      "options": [
        {
          "flag_start": 6874,
          "name": {
            "span": {
              "start": 6876,
              "end": 6880
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 6881,
          "name": {
            "span": {
              "start": 6883,
              "end": 6887
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6888,
              "end": 6892
            },
            "value": "runc"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6893,
              "end": 6906
            },
            "value": "/usr/bin/runc"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6907,
          "end": 6921
        },
        "value": "/buildkit-runc"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6922,
          "end": 6926
        }
      },
      "options": [
        {
          "flag_start": 6927,
          "name": {
            "span": {
              "start": 6929,
              "end": 6933
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 6934,
          "name": {
            "span": {
              "start": 6936,
              "end": 6940
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6941,
              "end": 6954
            },
            "value": "binfmt-filter"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6955,
              "end": 6960
            },
            "value": "/out/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6961,
          "end": 6962
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6963,
          "end": 6967
        }
      },
      "options": [
        {
          "flag_start": 6968,
          "name": {
            "span": {
              "start": 6970,
              "end": 6974
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 6975,
          "name": {
            "span": {
              "start": 6977,
              "end": 6981
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6982,
              "end": 7009
            },
            "value": "cni-plugins-export-squashed"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7010,
              "end": 7011
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7012,
          "end": 7013
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7014,
          "end": 7018
        }
      },
      "options": [
        {
          "flag_start": 7019,
          "name": {
            "span": {
              "start": 7021,
              "end": 7025
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7026,
          "name": {
            "span": {
              "start": 7028,
              "end": 7032
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7033,
              "end": 7041
            },
            "value": "buildctl"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7042,
              "end": 7059
            },
            "value": "/usr/bin/buildctl"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7060,
          "end": 7061
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7062,
          "end": 7066
        }
      },
      "options": [
        {
          "flag_start": 7067,
          "name": {
            "span": {
              "start": 7069,
              "end": 7073
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7074,
          "name": {
            "span": {
              "start": 7076,
              "end": 7080
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7081,
              "end": 7090
            },
            "value": "buildkitd"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7091,
              "end": 7109
            },
            "value": "/usr/bin/buildkitd"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7110,
          "end": 7111
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 7113,
          "end": 7117
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 7118,
          "end": 7125
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 7126,
            "end": 7128
          }
        },
        {
          "span": {
            "start": 7129,
            "end": 7144
          },
          "value": "binaries-darwin"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7145,
          "end": 7149
        }
      },
      "options": [
        {
          "flag_start": 7150,
          "name": {
            "span": {
              "start": 7152,
              "end": 7156
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7157,
          "name": {
            "span": {
              "start": 7159,
              "end": 7163
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7164,
              "end": 7172
            },
            "value": "buildctl"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7173,
              "end": 7190
            },
            "value": "/usr/bin/buildctl"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7191,
          "end": 7192
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 7194,
          "end": 7198
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 7199,
          "end": 7206
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 7207,
            "end": 7209
          }
        },
        {
          "span": {
            "start": 7210,
            "end": 7226
          },
          "value": "binaries-windows"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7227,
          "end": 7231
        }
      },
      "options": [
        {
          "flag_start": 7232,
          "name": {
            "span": {
              "start": 7234,
              "end": 7238
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7239,
          "name": {
            "span": {
              "start": 7241,
              "end": 7245
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7246,
              "end": 7254
            },
            "value": "buildctl"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7255,
              "end": 7272
            },
            "value": "/usr/bin/buildctl"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7273,
          "end": 7286
        },
        "value": "/buildctl.exe"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7287,
          "end": 7291
        }
      },
      "options": [
        {
          "flag_start": 7292,
          "name": {
            "span": {
              "start": 7294,
              "end": 7298
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7299,
          "name": {
            "span": {
              "start": 7301,
              "end": 7305
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7306,
              "end": 7315
            },
            "value": "buildkitd"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7316,
              "end": 7334
            },
            "value": "/usr/bin/buildkitd"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7335,
          "end": 7349
        },
        "value": "/buildkitd.exe"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 7351,
          "end": 7355
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 7356,
          "end": 7363
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 7364,
            "end": 7366
          }
        },
        {
          "span": {
            "start": 7367,
            "end": 7383
          },
          "value": "binaries-freebsd"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7384,
          "end": 7388
        }
      },
      "options": [
        {
          "flag_start": 7389,
          "name": {
            "span": {
              "start": 7391,
              "end": 7395
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7396,
          "name": {
            "span": {
              "start": 7398,
              "end": 7402
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7403,
              "end": 7412
            },
            "value": "buildkitd"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7413,
              "end": 7431
            },
            "value": "/usr/bin/buildkitd"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7432,
          "end": 7433
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7434,
          "end": 7438
        }
      },
      "options": [
        {
          "flag_start": 7439,
          "name": {
            "span": {
              "start": 7441,
              "end": 7445
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7446,
          "name": {
            "span": {
              "start": 7448,
              "end": 7452
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7453,
              "end": 7461
            },
            "value": "buildctl"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7462,
              "end": 7479
            },
            "value": "/usr/bin/buildctl"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7480,
          "end": 7481
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 7483,
          "end": 7487
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 7488,
          "end": 7506
        },
        "value": "binaries-$TARGETOS"
      },
      "as_": [
        {
          "span": {
            "start": 7507,
            "end": 7509
          }
        },
        {
          "span": {
            "start": 7510,
            "end": 7518
          },
          "value": "binaries"
        }
      ]
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 7583,
          "end": 7586
        }
      },
      "arguments": {
        "span": {
          "start": 7587,
          "end": 7616
        },
        "value": "BUILDKIT_SBOM_SCAN_STAGE=true"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 7618,
          "end": 7622
        }
      },
      "options": [
        {
          "flag_start": 7623,
          "name": {
            "span": {
              "start": 7625,
              "end": 7633
            },
            "value": "platform"
          },
          "value": {
            "span": {
              "start": 7634,
              "end": 7648
            },
            "value": "$BUILDPLATFORM"
          }
        }
      ],
      "image": {
        "span": {
          "start": 7649,
          "end": 7673
        },
        "value": "alpine:${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 7674,
            "end": 7676
          }
        },
        {
          "span": {
            "start": 7677,
            "end": 7685
          },
          "value": "releaser"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 7686,
          "end": 7689
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 7690,
            "end": 7717
          },
          "value": "apk add --no-cache tar gzip"
        }
      },
      "here_docs": []
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 7718,
          "end": 7725
        }
      },
      "arguments": {
        "span": {
          "start": 7726,
          "end": 7731
        },
        "value": "/work"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 7732,
          "end": 7735
        }
      },
      "arguments": {
        "span": {
          "start": 7736,
          "end": 7750
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 7751,
          "end": 7754
        }
      },
      "options": [
        {
          "flag_start": 7755,
          "name": {
            "span": {
              "start": 7757,
              "end": 7762
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 7763,
              "end": 7776
            },
            "value": "from=binaries"
          }
        },
        {
          "flag_start": 7781,
          "name": {
            "span": {
              "start": 7783,
              "end": 7788
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 7789,
              "end": 7852
            },
            "value": "source=/tmp/.version,target=/tmp/.version,from=buildkit-version"
          }
        },
        {
          "flag_start": 7857,
          "name": {
            "span": {
              "start": 7859,
              "end": 7864
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 7865,
              "end": 7936
            },
            "value": "source=/tmp/.commit_date,target=/tmp/.commit_date,from=buildkit-version"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 7941,
            "end": 8124
          },
          "value": "mkdir -p /out && tar czvf \"/out/buildkit-$(cat /tmp/.version).$(echo $TARGETPLATFORM | sed 's/\\//-/g').tar.gz\" --mtime=\"$(cat /tmp/.commit_date)\" --sort=name --transform 's/^./bin/' ."
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 8126,
          "end": 8130
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 8131,
          "end": 8138
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 8139,
            "end": 8141
          }
        },
        {
          "span": {
            "start": 8142,
            "end": 8149
          },
          "value": "release"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 8150,
          "end": 8154
        }
      },
      "options": [
        {
          "flag_start": 8155,
          "name": {
            "span": {
              "start": 8157,
              "end": 8161
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 8162,
          "name": {
            "span": {
              "start": 8164,
              "end": 8168
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 8169,
              "end": 8177
            },
            "value": "releaser"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 8178,
              "end": 8183
            },
            "value": "/out/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 8184,
          "end": 8185
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 8187,
          "end": 8191
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 8192,
          "end": 8216
        },
        "value": "alpine:${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 8217,
            "end": 8219
          }
        },
        {
          "span": {
            "start": 8220,
            "end": 8242
          },
          "value": "buildkit-export-alpine"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 8243,
          "end": 8246
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 8247,
            "end": 8363
          },
          "value": "apk add --no-cache fuse3 git openssh openssl pigz xz iptables ip6tables \\\n  && ln -s fusermount3 /usr/bin/fusermount"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 8364,
          "end": 8368
        }
      },
      "options": [
        {
          "flag_start": 8369,
          "name": {
            "span": {
              "start": 8371,
              "end": 8375
            },
            "value": "link"
          },
          "value": null
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 8376,
              "end": 8427
            },
            "value": "examples/buildctl-daemonless/buildctl-daemonless.sh"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 8428,
          "end": 8437
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "VOLUME",
      "volume": {
        "span": {
          "start": 8438,
          "end": 8444
        }
      },
      "arguments": {
        "string": [
          {
            "span": {
              "start": 8445,
              "end": 8462
            },
            "value": "/var/lib/buildkit"
          }
        ]
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 8464,
          "end": 8468
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 8469,
          "end": 8493
        },
        "value": "ubuntu:${UBUNTU_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 8494,
            "end": 8496
          }
        },
        {
          "span": {
            "start": 8497,
            "end": 8519
          },
          "value": "buildkit-export-ubuntu"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 8520,
          "end": 8523
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 8524,
            "end": 8743
          },
          "value": "apt-get update \\\n  && apt-get install -y --no-install-recommends \\\n    fuse3 \\\n    git \\\n    openssh-client \\\n    openssl \\\n    pigz \\\n    xz-utils \\\n    iptables \\\n    ca-certificates \\\n  && rm -rf /var/lib/apt/lists/*"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 8744,
          "end": 8748
        }
      },
      "options": [
        {
          "flag_start": 8749,
          "name": {
            "span": {
              "start": 8751,
              "end": 8755
            },
            "value": "link"
          },
          "value": null
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 8756,
              "end": 8807
            },
            "value": "examples/buildctl-daemonless/buildctl-daemonless.sh"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 8808,
          "end": 8817
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "VOLUME",
      "volume": {
        "span": {
          "start": 8818,
          "end": 8824
        }
      },
      "arguments": {
        "string": [
          {
            "span": {
              "start": 8825,
              "end": 8842
            },
            "value": "/var/lib/buildkit"
          }
        ]
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 8844,
          "end": 8848
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 8849,
          "end": 8879
        },
        "value": "buildkit-export-${EXPORT_BASE}"
      },
      "as_": [
        {
          "span": {
            "start": 8880,
            "end": 8882
          }
        },
        {
          "span": {
            "start": 8883,
            "end": 8898
          },
          "value": "buildkit-export"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 8899,
          "end": 8902
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 8903,
            "end": 8951
          },
          "value": "mkdir -p /etc/cdi /var/run/cdi /etc/buildkit/cdi"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 8953,
          "end": 8957
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 8958,
          "end": 8970
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 8971,
            "end": 8973
          }
        },
        {
          "span": {
            "start": 8974,
            "end": 8990
          },
          "value": "containerd-build"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 8991,
          "end": 8998
        }
      },
      "arguments": {
        "span": {
          "start": 8999,
          "end": 9039
        },
        "value": "/go/src/github.com/containerd/containerd"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 9040,
          "end": 9043
        }
      },
      "arguments": {
        "span": {
          "start": 9044,
          "end": 9058
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 9059,
          "end": 9062
        }
      },
      "arguments": {
        "span": {
          "start": 9063,
          "end": 9138
        },
        "value": "CGO_ENABLED=1 CGO_LDFLAGS=\"-fuse-ld=lld\" BUILDTAGS=no_btrfs GO111MODULE=off"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 9139,
          "end": 9142
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 9143,
            "end": 9182
          },
          "value": "xx-apk add musl-dev gcc && xx-go --wrap"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 9183,
          "end": 9187
        }
      },
      "options": [
        {
          "flag_start": 9188,
          "name": {
            "span": {
              "start": 9190,
              "end": 9195
            },
            "value": "chmod"
          },
          "value": {
            "span": {
              "start": 9196,
              "end": 9199
            },
            "value": "755"
          }
        }
      ],
      "src": [
        {
          "here_doc": {
            "span": {
              "start": 9217,
              "end": 9701
            },
            "expand": true,
            "value": "#!/bin/sh\nset -ex\nmkdir /out\nif [ \"$(xx-info os)\" = \"linux\" ]; then\n  make bin/containerd\n  make bin/containerd-shim-runc-v2\n  mv bin/containerd bin/containerd-shim* /out\nelse\n  CGO_ENABLED=0 make STATIC=1 binaries\n  if [ \"$(xx-info os)\" = \"windows\" ]; then\n    mv bin/containerd.exe /out\n  else\n    mv bin/containerd /out\n  fi\n  # No shim binary is built for FreeBSD, since containerd v2.0.\n  if ls bin/containerd-shim* >/dev/null 2>&1; then\n    mv bin/containerd-shim* /out\n  fi\nfi\n"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 9207,
          "end": 9216
        },
        "value": "/build.sh"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 9706,
          "end": 9710
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 9711,
          "end": 9727
        },
        "value": "containerd-build"
      },
      "as_": [
        {
          "span": {
            "start": 9728,
            "end": 9730
          }
        },
        {
          "span": {
            "start": 9731,
            "end": 9741
          },
          "value": "containerd"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 9742,
          "end": 9749
        }
      },
      "arguments": {
        "span": {
          "start": 9750,
          "end": 9790
        },
        "value": "/go/src/github.com/containerd/containerd"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 9791,
          "end": 9794
        }
      },
      "arguments": {
        "span": {
          "start": 9795,
          "end": 9813
        },
        "value": "CONTAINERD_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 9814,
          "end": 9817
        }
      },
      "options": [
        {
          "flag_start": 9818,
          "name": {
            "span": {
              "start": 9820,
              "end": 9832
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 9833,
              "end": 9837
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 9838,
              "end": 9904
            },
            "value": "\"https://github.com/containerd/containerd.git#$CONTAINERD_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 9905,
          "end": 9906
        },
        "value": "."
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 9907,
          "end": 9910
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 9911,
            "end": 9920
          },
          "value": "/build.sh"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 9987,
          "end": 9991
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 9992,
          "end": 10008
        },
        "value": "containerd-build"
      },
      "as_": [
        {
          "span": {
            "start": 10009,
            "end": 10011
          }
        },
        {
          "span": {
            "start": 10012,
            "end": 10029
          },
          "value": "containerd-alt-20"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 10030,
          "end": 10037
        }
      },
      "arguments": {
        "span": {
          "start": 10038,
          "end": 10078
        },
        "value": "/go/src/github.com/containerd/containerd"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 10079,
          "end": 10082
        }
      },
      "arguments": {
        "span": {
          "start": 10083,
          "end": 10108
        },
        "value": "CONTAINERD_ALT_VERSION_20"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 10109,
          "end": 10112
        }
      },
      "options": [
        {
          "flag_start": 10113,
          "name": {
            "span": {
              "start": 10115,
              "end": 10127
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 10128,
              "end": 10132
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 10133,
              "end": 10206
            },
            "value": "\"https://github.com/containerd/containerd.git#$CONTAINERD_ALT_VERSION_20\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 10207,
          "end": 10208
        },
        "value": "."
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 10209,
          "end": 10212
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 10213,
            "end": 10222
          },
          "value": "/build.sh"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 10289,
          "end": 10293
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 10294,
          "end": 10310
        },
        "value": "containerd-build"
      },
      "as_": [
        {
          "span": {
            "start": 10311,
            "end": 10313
          }
        },
        {
          "span": {
            "start": 10314,
            "end": 10331
          },
          "value": "containerd-alt-17"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 10332,
          "end": 10339
        }
      },
      "arguments": {
        "span": {
          "start": 10340,
          "end": 10380
        },
        "value": "/go/src/github.com/containerd/containerd"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 10381,
          "end": 10384
        }
      },
      "arguments": {
        "span": {
          "start": 10385,
          "end": 10410
        },
        "value": "CONTAINERD_ALT_VERSION_17"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 10411,
          "end": 10414
        }
      },
      "options": [
        {
          "flag_start": 10415,
          "name": {
            "span": {
              "start": 10417,
              "end": 10429
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 10430,
              "end": 10434
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 10435,
              "end": 10508
            },
            "value": "\"https://github.com/containerd/containerd.git#$CONTAINERD_ALT_VERSION_17\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 10509,
          "end": 10510
        },
        "value": "."
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 10511,
          "end": 10514
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 10515,
            "end": 10524
          },
          "value": "/build.sh"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 10526,
          "end": 10530
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 10531,
          "end": 10543
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 10544,
            "end": 10546
          }
        },
        {
          "span": {
            "start": 10547,
            "end": 10555
          },
          "value": "registry"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 10556,
          "end": 10563
        }
      },
      "arguments": {
        "span": {
          "start": 10564,
          "end": 10602
        },
        "value": "/go/src/github.com/docker/distribution"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 10603,
          "end": 10606
        }
      },
      "arguments": {
        "span": {
          "start": 10607,
          "end": 10623
        },
        "value": "REGISTRY_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 10624,
          "end": 10627
        }
      },
      "options": [
        {
          "flag_start": 10628,
          "name": {
            "span": {
              "start": 10630,
              "end": 10642
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 10643,
              "end": 10647
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 10648,
              "end": 10716
            },
            "value": "\"https://github.com/distribution/distribution.git#$REGISTRY_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 10717,
          "end": 10718
        },
        "value": "."
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 10719,
          "end": 10722
        }
      },
      "arguments": {
        "span": {
          "start": 10723,
          "end": 10737
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 10738,
          "end": 10741
        }
      },
      "options": [
        {
          "flag_start": 10742,
          "name": {
            "span": {
              "start": 10744,
              "end": 10749
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 10750,
              "end": 10780
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 10786,
            "end": 10786
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 10787,
            "end": 11059
          },
          "expand": true,
          "value": "  set -ex\n  mkdir /out\n  export GOPATH=\"$(pwd)/Godeps/_workspace:$GOPATH\"\n  GO111MODULE=off CGO_ENABLED=0 xx-go build -o /out/registry ./cmd/registry\n  xx-verify --static /out/registry\n  if [ \"$(xx-info os)\" = \"windows\" ]; then\n    mv /out/registry /out/registry.exe\n  fi\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 11064,
          "end": 11068
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 11069,
          "end": 11081
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 11082,
            "end": 11084
          }
        },
        {
          "span": {
            "start": 11085,
            "end": 11096
          },
          "value": "rootlesskit"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 11097,
          "end": 11104
        }
      },
      "arguments": {
        "span": {
          "start": 11105,
          "end": 11155
        },
        "value": "/go/src/github.com/rootless-containers/rootlesskit"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 11156,
          "end": 11159
        }
      },
      "arguments": {
        "span": {
          "start": 11160,
          "end": 11179
        },
        "value": "ROOTLESSKIT_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 11180,
          "end": 11183
        }
      },
      "options": [
        {
          "flag_start": 11184,
          "name": {
            "span": {
              "start": 11186,
              "end": 11198
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 11199,
              "end": 11203
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 11204,
              "end": 11281
            },
            "value": "\"https://github.com/rootless-containers/rootlesskit.git#$ROOTLESSKIT_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 11282,
          "end": 11283
        },
        "value": "."
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 11284,
          "end": 11287
        }
      },
      "arguments": {
        "span": {
          "start": 11288,
          "end": 11302
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 11303,
          "end": 11306
        }
      },
      "options": [
        {
          "flag_start": 11308,
          "name": {
            "span": {
              "start": 11310,
              "end": 11315
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 11316,
              "end": 11346
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 11351,
            "end": 11449
          },
          "value": "CGO_ENABLED=0 xx-go build -o /rootlesskit ./cmd/rootlesskit && \\\n  xx-verify --static /rootlesskit"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 11451,
          "end": 11455
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 11456,
          "end": 11468
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 11469,
            "end": 11471
          }
        },
        {
          "span": {
            "start": 11472,
            "end": 11490
          },
          "value": "stargz-snapshotter"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 11491,
          "end": 11498
        }
      },
      "arguments": {
        "span": {
          "start": 11499,
          "end": 11547
        },
        "value": "/go/src/github.com/containerd/stargz-snapshotter"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 11548,
          "end": 11551
        }
      },
      "arguments": {
        "span": {
          "start": 11552,
          "end": 11578
        },
        "value": "STARGZ_SNAPSHOTTER_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 11579,
          "end": 11582
        }
      },
      "options": [
        {
          "flag_start": 11583,
          "name": {
            "span": {
              "start": 11585,
              "end": 11597
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 11598,
              "end": 11602
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 11603,
              "end": 11685
            },
            "value": "\"https://github.com/containerd/stargz-snapshotter.git#$STARGZ_SNAPSHOTTER_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 11686,
          "end": 11687
        },
        "value": "."
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 11688,
          "end": 11691
        }
      },
      "arguments": {
        "span": {
          "start": 11692,
          "end": 11706
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 11707,
          "end": 11710
        }
      },
      "options": [
        {
          "flag_start": 11711,
          "name": {
            "span": {
              "start": 11713,
              "end": 11718
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 11719,
              "end": 11749
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 11754,
            "end": 11915
          },
          "value": "xx-go --wrap && \\\n  mkdir /out && CGO_ENABLED=0 PREFIX=/out/ make && \\\n  xx-verify --static /out/containerd-stargz-grpc && \\\n  xx-verify --static /out/ctr-remote"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 11917,
          "end": 11921
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 11922,
          "end": 11934
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 11935,
            "end": 11937
          }
        },
        {
          "span": {
            "start": 11938,
            "end": 11943
          },
          "value": "nydus"
        }
      ]
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 11944,
          "end": 11947
        }
      },
      "arguments": {
        "span": {
          "start": 11948,
          "end": 11961
        },
        "value": "NYDUS_VERSION"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 11962,
          "end": 11965
        }
      },
      "arguments": {
        "span": {
          "start": 11966,
          "end": 11974
        },
        "value": "TARGETOS"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 11975,
          "end": 11978
        }
      },
      "arguments": {
        "span": {
          "start": 11979,
          "end": 11989
        },
        "value": "TARGETARCH"
      }
    },
    {
      "kind": "SHELL",
      "shell": {
        "span": {
          "start": 11990,
          "end": 11995
        }
      },
      "arguments": [
        {
          "span": {
            "start": 11998,
            "end": 12007
          },
          "value": "/bin/bash"
        },
        {
          "span": {
            "start": 12011,
            "end": 12013
          },
          "value": "-c"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 12016,
          "end": 12019
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 12020,
            "end": 12157
          },
          "value": "wget https://github.com/dragonflyoss/image-service/releases/download/$NYDUS_VERSION/nydus-static-$NYDUS_VERSION-$TARGETOS-$TARGETARCH.tgz"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 12158,
          "end": 12161
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 12162,
            "end": 12262
          },
          "value": "mkdir -p /out/nydus-static && tar xzvf nydus-static-$NYDUS_VERSION-$TARGETOS-$TARGETARCH.tgz -C /out"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 12264,
          "end": 12268
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 12269,
          "end": 12281
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 12282,
            "end": 12284
          }
        },
        {
          "span": {
            "start": 12285,
            "end": 12294
          },
          "value": "gotestsum"
        }
      ]
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 12295,
          "end": 12298
        }
      },
      "arguments": {
        "span": {
          "start": 12299,
          "end": 12316
        },
        "value": "GOTESTSUM_VERSION"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 12317,
          "end": 12320
        }
      },
      "arguments": {
        "span": {
          "start": 12321,
          "end": 12335
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 12336,
          "end": 12339
        }
      },
      "options": [
        {
          "flag_start": 12340,
          "name": {
            "span": {
              "start": 12342,
              "end": 12347
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 12348,
              "end": 12378
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 12384,
            "end": 12384
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 12385,
            "end": 12725
          },
          "expand": true,
          "value": "  set -ex\n  xx-go install \"gotest.tools/gotestsum@${GOTESTSUM_VERSION}\"\n  xx-go install \"github.com/wadey/gocovmerge@latest\"\n  mkdir /out\n  if ! xx-info is-cross; then\n    /go/bin/gotestsum --version\n    mv /go/bin/gotestsum /out\n    mv /go/bin/gocovmerge /out\n  else\n    mv /go/bin/*/gotestsum* /out\n    mv /go/bin/*/gocovmerge* /out\n  fi\n"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 12729,
          "end": 12733
        }
      },
      "options": [
        {
          "flag_start": 12734,
          "name": {
            "span": {
              "start": 12736,
              "end": 12741
            },
            "value": "chmod"
          },
          "value": {
            "span": {
              "start": 12742,
              "end": 12745
            },
            "value": "755"
          }
        }
      ],
      "src": [
        {
          "here_doc": {
            "span": {
              "start": 12777,
              "end": 13350
            },
            "expand": false,
            "value": "#!/bin/sh\nset -x\nif [ -z \"$GO_TEST_COVERPROFILE\" ]; then\n  exec gotestsum \"$@\"\nfi\ncoverdir=\"$(dirname \"$GO_TEST_COVERPROFILE\")\"\nmkdir -p \"$coverdir/helpers\"\ngotestsum \"$@\" \"-coverprofile=$GO_TEST_COVERPROFILE\"\necode=$?\ngo tool covdata textfmt -i=$coverdir/helpers -o=$coverdir/helpers-report.txt\ngocovmerge \"$coverdir/helpers-report.txt\" \"$GO_TEST_COVERPROFILE\" > \"$coverdir/merged-report.txt\"\nmv \"$coverdir/merged-report.txt\" \"$GO_TEST_COVERPROFILE\"\nrm \"$coverdir/helpers-report.txt\"\nfor f in \"$coverdir/helpers\"/*; do\n  rm \"$f\"\ndone\nrmdir \"$coverdir/helpers\"\nexit $ecode\n"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 12754,
          "end": 12776
        },
        "value": "/out/gotestsumandcover"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 13399,
          "end": 13403
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 13404,
          "end": 13416
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 13417,
            "end": 13419
          }
        },
        {
          "span": {
            "start": 13420,
            "end": 13423
          },
          "value": "dlv"
        }
      ]
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 13424,
          "end": 13427
        }
      },
      "arguments": {
        "span": {
          "start": 13428,
          "end": 13441
        },
        "value": "DELVE_VERSION"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 13442,
          "end": 13445
        }
      },
      "arguments": {
        "span": {
          "start": 13446,
          "end": 13460
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 13461,
          "end": 13464
        }
      },
      "options": [
        {
          "flag_start": 13465,
          "name": {
            "span": {
              "start": 13467,
              "end": 13472
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 13473,
              "end": 13505
            },
            "value": "target=/root/.cache,type=cache"
          }
        },
        {
          "flag_start": 13509,
          "name": {
            "span": {
              "start": 13511,
              "end": 13516
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 13517,
              "end": 13546
            },
            "value": "target=/go/pkg/mod,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 13552,
            "end": 13552
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 13553,
            "end": 13952
          },
          "expand": true,
          "value": "  set -ex\n  mkdir /out\n  if [ \"$(xx-info os)\" = \"freebsd\" ]; then\n    echo \"WARN: dlv requires cgo enabled on FreeBSD, skipping: https://github.com/moby/buildkit/pull/5497#issuecomment-2462031339\"\n    exit 0\n  fi\n  xx-go install \"github.com/go-delve/delve/cmd/dlv@${DELVE_VERSION}\"\n  if ! xx-info is-cross; then\n    /go/bin/dlv version\n    mv /go/bin/dlv /out\n  else\n    mv /go/bin/*/dlv* /out\n  fi\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 13957,
          "end": 13961
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 13962,
          "end": 13977
        },
        "value": "buildkit-export"
      },
      "as_": [
        {
          "span": {
            "start": 13978,
            "end": 13980
          }
        },
        {
          "span": {
            "start": 13981,
            "end": 13995
          },
          "value": "buildkit-linux"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 13996,
          "end": 14000
        }
      },
      "options": [
        {
          "flag_start": 14001,
          "name": {
            "span": {
              "start": 14003,
              "end": 14007
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 14008,
          "name": {
            "span": {
              "start": 14010,
              "end": 14014
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 14015,
              "end": 14023
            },
            "value": "binaries"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 14024,
              "end": 14025
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 14026,
          "end": 14035
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 14036,
          "end": 14039
        }
      },
      "arguments": {
        "span": {
          "start": 14040,
          "end": 14070
        },
        "value": "BUILDKIT_SETUP_CGROUPV2_ROOT=1"
      }
    },
    {
      "kind": "ENTRYPOINT",
      "entrypoint": {
        "span": {
          "start": 14071,
          "end": 14081
        }
      },
      "arguments": {
        "exec": {
          "span": {
            "start": 14082,
            "end": 14095
          },
          "value": [
            {
              "span": {
                "start": 14084,
                "end": 14093
              },
              "value": "buildkitd"
            }
          ]
        }
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 14097,
          "end": 14101
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 14102,
          "end": 14116
        },
        "value": "buildkit-linux"
      },
      "as_": [
        {
          "span": {
            "start": 14117,
            "end": 14119
          }
        },
        {
          "span": {
            "start": 14120,
            "end": 14140
          },
          "value": "buildkit-linux-debug"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 14141,
          "end": 14145
        }
      },
      "options": [
        {
          "flag_start": 14146,
          "name": {
            "span": {
              "start": 14148,
              "end": 14152
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 14153,
          "name": {
            "span": {
              "start": 14155,
              "end": 14159
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 14160,
              "end": 14163
            },
            "value": "dlv"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 14164,
              "end": 14172
            },
            "value": "/out/dlv"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 14173,
          "end": 14185
        },
        "value": "/usr/bin/dlv"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 14186,
          "end": 14190
        }
      },
      "options": [
        {
          "flag_start": 14191,
          "name": {
            "span": {
              "start": 14193,
              "end": 14197
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 14198,
          "name": {
            "span": {
              "start": 14200,
              "end": 14205
            },
            "value": "chmod"
          },
          "value": {
            "span": {
              "start": 14206,
              "end": 14209
            },
            "value": "755"
          }
        }
      ],
      "src": [
        {
          "here_doc": {
            "span": {
              "start": 14238,
              "end": 14416
            },
            "expand": true,
            "value": "#!/bin/sh\nexec dlv exec /usr/bin/buildkitd \\\\\n  --api-version=2 \\\\\n  -l 0.0.0.0:\\${DELVE_PORT:-5000} \\\\\n  --headless=true \\\\\n  --accept-multiclient \\\\\n  --continue \\\\\n  -- \"\\$@\"\n"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 14216,
          "end": 14237
        },
        "value": "/docker-entrypoint.sh"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 14420,
          "end": 14423
        }
      },
      "arguments": {
        "span": {
          "start": 14424,
          "end": 14439
        },
        "value": "DELVE_PORT=5000"
      }
    },
    {
      "kind": "ENTRYPOINT",
      "entrypoint": {
        "span": {
          "start": 14440,
          "end": 14450
        }
      },
      "arguments": {
        "exec": {
          "span": {
            "start": 14451,
            "end": 14476
          },
          "value": [
            {
              "span": {
                "start": 14453,
                "end": 14474
              },
              "value": "/docker-entrypoint.sh"
            }
          ]
        }
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 14478,
          "end": 14482
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 14483,
          "end": 14491
        },
        "value": "binaries"
      },
      "as_": [
        {
          "span": {
            "start": 14492,
            "end": 14494
          }
        },
        {
          "span": {
            "start": 14495,
            "end": 14510
          },
          "value": "buildkit-darwin"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 14512,
          "end": 14516
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 14517,
          "end": 14525
        },
        "value": "binaries"
      },
      "as_": [
        {
          "span": {
            "start": 14526,
            "end": 14528
          }
        },
        {
          "span": {
            "start": 14529,
            "end": 14545
          },
          "value": "buildkit-freebsd"
        }
      ]
    },
    {
      "kind": "ENTRYPOINT",
      "entrypoint": {
        "span": {
          "start": 14546,
          "end": 14556
        }
      },
      "arguments": {
        "exec": {
          "span": {
            "start": 14557,
            "end": 14571
          },
          "value": [
            {
              "span": {
                "start": 14559,
                "end": 14569
              },
              "value": "/buildkitd"
            }
          ]
        }
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 14573,
          "end": 14577
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 14578,
          "end": 14586
        },
        "value": "binaries"
      },
      "as_": [
        {
          "span": {
            "start": 14587,
            "end": 14589
          }
        },
        {
          "span": {
            "start": 14590,
            "end": 14606
          },
          "value": "buildkit-windows"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 14608,
          "end": 14612
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 14613,
          "end": 14620
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 14621,
            "end": 14623
          }
        },
        {
          "span": {
            "start": 14624,
            "end": 14641
          },
          "value": "binaries-for-test"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 14642,
          "end": 14646
        }
      },
      "options": [
        {
          "flag_start": 14647,
          "name": {
            "span": {
              "start": 14649,
              "end": 14653
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 14654,
          "name": {
            "span": {
              "start": 14656,
              "end": 14660
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 14661,
              "end": 14670
            },
            "value": "gotestsum"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 14671,
              "end": 14675
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 14676,
          "end": 14677
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 14678,
          "end": 14682
        }
      },
      "options": [
        {
          "flag_start": 14683,
          "name": {
            "span": {
              "start": 14685,
              "end": 14689
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 14690,
          "name": {
            "span": {
              "start": 14692,
              "end": 14696
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 14697,
              "end": 14700
            },
            "value": "dlv"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 14701,
              "end": 14705
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 14706,
          "end": 14707
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 14708,
          "end": 14712
        }
      },
      "options": [
        {
          "flag_start": 14713,
          "name": {
            "span": {
              "start": 14715,
              "end": 14719
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 14720,
          "name": {
            "span": {
              "start": 14722,
              "end": 14726
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 14727,
              "end": 14735
            },
            "value": "registry"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 14736,
              "end": 14740
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 14741,
          "end": 14742
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 14743,
          "end": 14747
        }
      },
      "options": [
        {
          "flag_start": 14748,
          "name": {
            "span": {
              "start": 14750,
              "end": 14754
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 14755,
          "name": {
            "span": {
              "start": 14757,
              "end": 14761
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 14762,
              "end": 14772
            },
            "value": "containerd"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 14773,
              "end": 14777
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 14778,
          "end": 14779
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 14780,
          "end": 14784
        }
      },
      "options": [
        {
          "flag_start": 14785,
          "name": {
            "span": {
              "start": 14787,
              "end": 14791
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 14792,
          "name": {
            "span": {
              "start": 14794,
              "end": 14798
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 14799,
              "end": 14807
            },
            "value": "binaries"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 14808,
              "end": 14809
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 14810,
          "end": 14811
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 14813,
          "end": 14817
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 14818,
          "end": 14831
        },
        "value": "buildkit-base"
      },
      "as_": [
        {
          "span": {
            "start": 14832,
            "end": 14834
          }
        },
        {
          "span": {
            "start": 14835,
            "end": 14857
          },
          "value": "integration-tests-base"
        }
      ]
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 14858,
          "end": 14861
        }
      },
      "arguments": {
        "span": {
          "start": 14862,
          "end": 14910
        },
        "value": "BUILDKIT_INTEGRATION_ROOTLESS_IDPAIR=\"1000:1000\""
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 14911,
          "end": 14914
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 14915,
            "end": 15398
          },
          "value": "apk add --no-cache shadow shadow-uidmap sudo vim iptables ip6tables dnsmasq fuse curl git-daemon openssh-client openssl slirp4netns iproute2 gpg gpg-agent \\\n  && useradd --create-home --home-dir /home/user --uid 1000 -s /bin/sh user \\\n  && echo \"XDG_RUNTIME_DIR=/run/user/1000; export XDG_RUNTIME_DIR\" >> /home/user/.profile \\\n  && mkdir -m 0700 -p /run/user/1000 \\\n  && chown -R user /run/user/1000 /home/user \\\n  && ln -s /sbin/iptables-legacy /usr/bin/iptables \\\n  && xx-go --wrap"
        }
      },
      "here_docs": []
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 15399,
          "end": 15402
        }
      },
      "arguments": {
        "span": {
          "start": 15403,
          "end": 15418
        },
        "value": "NERDCTL_VERSION"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 15419,
          "end": 15422
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 15423,
            "end": 15626
          },
          "value": "curl -fsSL https://raw.githubusercontent.com/containerd/nerdctl/$NERDCTL_VERSION/extras/rootless/containerd-rootless.sh > /usr/bin/containerd-rootless.sh \\\n  && chmod 0755 /usr/bin/containerd-rootless.sh"
        }
      },
      "here_docs": []
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 15627,
          "end": 15630
        }
      },
      "arguments": {
        "span": {
          "start": 15631,
          "end": 15646
        },
        "value": "AZURITE_VERSION"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 15647,
          "end": 15650
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 15651,
            "end": 15729
          },
          "value": "apk add --no-cache nodejs npm \\\n  && npm install -g azurite@${AZURITE_VERSION}"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 15865,
          "end": 15868
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 15869,
            "end": 16005
          },
          "value": "curl -fsSL https://raw.githubusercontent.com/moby/moby/v25.0.1/hack/dind > /docker-entrypoint.sh \\\n  && chmod 0755 /docker-entrypoint.sh"
        }
      },
      "here_docs": []
    },
    {
      "kind": "ENTRYPOINT",
      "entrypoint": {
        "span": {
          "start": 16006,
          "end": 16016
        }
      },
      "arguments": {
        "exec": {
          "span": {
            "start": 16017,
            "end": 16042
          },
          "value": [
            {
              "span": {
                "start": 16019,
                "end": 16040
              },
              "value": "/docker-entrypoint.sh"
            }
          ]
        }
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 16120,
          "end": 16123
        }
      },
      "arguments": {
        "span": {
          "start": 16124,
          "end": 16247
        },
        "value": "BUILDKIT_INTEGRATION_CONTAINERD_EXTRA=\"containerd-2.0=/opt/containerd-alt-20/bin,containerd-1.7=/opt/containerd-alt-17/bin\""
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 16248,
          "end": 16251
        }
      },
      "arguments": {
        "span": {
          "start": 16252,
          "end": 16291
        },
        "value": "BUILDKIT_INTEGRATION_SNAPSHOTTER=stargz"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 16292,
          "end": 16295
        }
      },
      "arguments": {
        "span": {
          "start": 16296,
          "end": 16326
        },
        "value": "BUILDKIT_SETUP_CGROUPV2_ROOT=1"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 16327,
          "end": 16330
        }
      },
      "arguments": {
        "span": {
          "start": 16331,
          "end": 16391
        },
        "value": "BUILDKIT_TEST_SIGN_FIXTURES=/tmp/buildkit_test_sign_fixtures"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 16392,
          "end": 16395
        }
      },
      "options": [
        {
          "flag_start": 16396,
          "name": {
            "span": {
              "start": 16398,
              "end": 16403
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 16404,
              "end": 16476
            },
            "value": "target=/tmp/gen_gpg_test_env.sh,source=hack/fixtures/gen_gpg_test_env.sh"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 16477,
            "end": 16547
          },
          "value": "sh /tmp/gen_gpg_test_env.sh user1 && sh /tmp/gen_gpg_test_env.sh user2"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 16548,
          "end": 16551
        }
      },
      "options": [
        {
          "flag_start": 16552,
          "name": {
            "span": {
              "start": 16554,
              "end": 16559
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 16560,
              "end": 16632
            },
            "value": "target=/tmp/gen_ssh_test_env.sh,source=hack/fixtures/gen_ssh_test_env.sh"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 16633,
            "end": 16703
          },
          "value": "sh /tmp/gen_ssh_test_env.sh user1 && sh /tmp/gen_ssh_test_env.sh user2"
        }
      },
      "here_docs": []
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 16704,
          "end": 16707
        }
      },
      "arguments": {
        "span": {
          "start": 16708,
          "end": 16721
        },
        "value": "CGO_ENABLED=0"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 16722,
          "end": 16725
        }
      },
      "arguments": {
        "span": {
          "start": 16726,
          "end": 16759
        },
        "value": "GOTESTSUM_FORMAT=standard-verbose"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 16760,
          "end": 16764
        }
      },
      "options": [
        {
          "flag_start": 16765,
          "name": {
            "span": {
              "start": 16767,
              "end": 16771
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 16772,
          "name": {
            "span": {
              "start": 16774,
              "end": 16778
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 16779,
              "end": 16788
            },
            "value": "gotestsum"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 16789,
              "end": 16793
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 16794,
          "end": 16803
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 16804,
          "end": 16808
        }
      },
      "options": [
        {
          "flag_start": 16809,
          "name": {
            "span": {
              "start": 16811,
              "end": 16815
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 16816,
          "name": {
            "span": {
              "start": 16818,
              "end": 16822
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 16823,
              "end": 16828
            },
            "value": "minio"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 16829,
              "end": 16843
            },
            "value": "/usr/bin/minio"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 16844,
          "end": 16853
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 16854,
          "end": 16858
        }
      },
      "options": [
        {
          "flag_start": 16859,
          "name": {
            "span": {
              "start": 16861,
              "end": 16865
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 16866,
          "name": {
            "span": {
              "start": 16868,
              "end": 16872
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 16873,
              "end": 16881
            },
            "value": "minio-mc"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 16882,
              "end": 16893
            },
            "value": "/usr/bin/mc"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 16894,
          "end": 16903
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 16904,
          "end": 16908
        }
      },
      "options": [
        {
          "flag_start": 16909,
          "name": {
            "span": {
              "start": 16911,
              "end": 16915
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 16916,
          "name": {
            "span": {
              "start": 16918,
              "end": 16922
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 16923,
              "end": 16928
            },
            "value": "nydus"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 16929,
              "end": 16948
            },
            "value": "/out/nydus-static/*"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 16949,
          "end": 16958
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 16959,
          "end": 16963
        }
      },
      "options": [
        {
          "flag_start": 16964,
          "name": {
            "span": {
              "start": 16966,
              "end": 16970
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 16971,
          "name": {
            "span": {
              "start": 16973,
              "end": 16977
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 16978,
              "end": 16996
            },
            "value": "stargz-snapshotter"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 16997,
              "end": 17003
            },
            "value": "/out/*"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17004,
          "end": 17013
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17014,
          "end": 17018
        }
      },
      "options": [
        {
          "flag_start": 17019,
          "name": {
            "span": {
              "start": 17021,
              "end": 17025
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17026,
          "name": {
            "span": {
              "start": 17028,
              "end": 17032
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17033,
              "end": 17044
            },
            "value": "rootlesskit"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17045,
              "end": 17057
            },
            "value": "/rootlesskit"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17058,
          "end": 17067
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17068,
          "end": 17072
        }
      },
      "options": [
        {
          "flag_start": 17073,
          "name": {
            "span": {
              "start": 17075,
              "end": 17079
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17080,
          "name": {
            "span": {
              "start": 17082,
              "end": 17086
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17087,
              "end": 17104
            },
            "value": "containerd-alt-20"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17105,
              "end": 17121
            },
            "value": "/out/containerd*"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17122,
          "end": 17149
        },
        "value": "/opt/containerd-alt-20/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17150,
          "end": 17154
        }
      },
      "options": [
        {
          "flag_start": 17155,
          "name": {
            "span": {
              "start": 17157,
              "end": 17161
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17162,
          "name": {
            "span": {
              "start": 17164,
              "end": 17168
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17169,
              "end": 17186
            },
            "value": "containerd-alt-17"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17187,
              "end": 17203
            },
            "value": "/out/containerd*"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17204,
          "end": 17231
        },
        "value": "/opt/containerd-alt-17/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17232,
          "end": 17236
        }
      },
      "options": [
        {
          "flag_start": 17237,
          "name": {
            "span": {
              "start": 17239,
              "end": 17243
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17244,
          "name": {
            "span": {
              "start": 17246,
              "end": 17250
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17251,
              "end": 17259
            },
            "value": "registry"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17260,
              "end": 17264
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17265,
          "end": 17274
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17275,
          "end": 17279
        }
      },
      "options": [
        {
          "flag_start": 17280,
          "name": {
            "span": {
              "start": 17282,
              "end": 17286
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17287,
          "name": {
            "span": {
              "start": 17289,
              "end": 17293
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17294,
              "end": 17298
            },
            "value": "runc"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17299,
              "end": 17312
            },
            "value": "/usr/bin/runc"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17313,
          "end": 17322
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17323,
          "end": 17327
        }
      },
      "options": [
        {
          "flag_start": 17328,
          "name": {
            "span": {
              "start": 17330,
              "end": 17334
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17335,
          "name": {
            "span": {
              "start": 17337,
              "end": 17341
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17342,
              "end": 17352
            },
            "value": "containerd"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17353,
              "end": 17369
            },
            "value": "/out/containerd*"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17370,
          "end": 17379
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17380,
          "end": 17384
        }
      },
      "options": [
        {
          "flag_start": 17385,
          "name": {
            "span": {
              "start": 17387,
              "end": 17391
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17392,
          "name": {
            "span": {
              "start": 17394,
              "end": 17398
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17399,
              "end": 17410
            },
            "value": "cni-plugins"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17411,
              "end": 17430
            },
            "value": "/opt/cni/bin/bridge"
          }
        },
        {
          "path": {
            "span": {
              "start": 17431,
              "end": 17454
            },
            "value": "/opt/cni/bin/host-local"
          }
        },
        {
          "path": {
            "span": {
              "start": 17455,
              "end": 17476
            },
            "value": "/opt/cni/bin/loopback"
          }
        },
        {
          "path": {
            "span": {
              "start": 17477,
              "end": 17498
            },
            "value": "/opt/cni/bin/firewall"
          }
        },
        {
          "path": {
            "span": {
              "start": 17499,
              "end": 17519
            },
            "value": "/opt/cni/bin/dnsname"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17520,
          "end": 17533
        },
        "value": "/opt/cni/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17534,
          "end": 17538
        }
      },
      "options": [
        {
          "flag_start": 17539,
          "name": {
            "span": {
              "start": 17541,
              "end": 17545
            },
            "value": "link"
          },
          "value": null
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17546,
              "end": 17568
            },
            "value": "hack/fixtures/cni.json"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17569,
          "end": 17591
        },
        "value": "/etc/buildkit/cni.json"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17592,
          "end": 17596
        }
      },
      "options": [
        {
          "flag_start": 17597,
          "name": {
            "span": {
              "start": 17599,
              "end": 17603
            },
            "value": "link"
          },
          "value": null
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17604,
              "end": 17634
            },
            "value": "hack/fixtures/dns-cni.conflist"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17635,
          "end": 17665
        },
        "value": "/etc/buildkit/dns-cni.conflist"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17666,
          "end": 17670
        }
      },
      "options": [
        {
          "flag_start": 17671,
          "name": {
            "span": {
              "start": 17673,
              "end": 17677
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17678,
          "name": {
            "span": {
              "start": 17680,
              "end": 17684
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17685,
              "end": 17693
            },
            "value": "binaries"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17694,
              "end": 17695
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17696,
          "end": 17705
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 17776,
          "end": 17780
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 17781,
          "end": 17803
        },
        "value": "integration-tests-base"
      },
      "as_": [
        {
          "span": {
            "start": 17804,
            "end": 17806
          }
        },
        {
          "span": {
            "start": 17807,
            "end": 17824
          },
          "value": "integration-tests"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17825,
          "end": 17829
        }
      },
      "options": [],
      "src": [
        {
          "path": {
            "span": {
              "start": 17830,
              "end": 17831
            },
            "value": "."
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17832,
          "end": 17833
        },
        "value": "."
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 17834,
          "end": 17837
        }
      },
      "arguments": {
        "span": {
          "start": 17838,
          "end": 17936
        },
        "value": "BUILDKIT_RUN_NETWORK_INTEGRATION_TESTS=1 BUILDKIT_CNI_INIT_LOCK_PATH=/run/buildkit_cni_bridge.lock"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 17938,
          "end": 17942
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 17943,
          "end": 17960
        },
        "value": "integration-tests"
      },
      "as_": [
        {
          "span": {
            "start": 17961,
            "end": 17963
          }
        },
        {
          "span": {
            "start": 17964,
            "end": 17971
          },
          "value": "dev-env"
        }
      ]
    },
    {
      "kind": "VOLUME",
      "volume": {
        "span": {
          "start": 17972,
          "end": 17978
        }
      },
      "arguments": {
        "string": [
          {
            "span": {
              "start": 17979,
              "end": 17996
            },
            "value": "/var/lib/buildkit"
          }
        ]
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 18054,
          "end": 18058
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 18059,
          "end": 18083
        },
        "value": "alpine:${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 18084,
            "end": 18086
          }
        },
        {
          "span": {
            "start": 18087,
            "end": 18095
          },
          "value": "rootless"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 18096,
          "end": 18099
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 18100,
            "end": 18181
          },
          "value": "apk add --no-cache fuse3 fuse-overlayfs git openssh openssl pigz shadow-uidmap xz"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 18182,
          "end": 18185
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 18186,
            "end": 18408
          },
          "value": "adduser -D -u 1000 user \\\n  && mkdir -p /run/user/1000 /home/user/.local/tmp /home/user/.local/share/buildkit \\\n  && chown -R user /run/user/1000 /home/user \\\n  && echo user:100000:65536 | tee /etc/subuid | tee /etc/subgid"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18409,
          "end": 18413
        }
      },
      "options": [
        {
          "flag_start": 18414,
          "name": {
            "span": {
              "start": 18416,
              "end": 18420
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 18421,
          "name": {
            "span": {
              "start": 18423,
              "end": 18427
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 18428,
              "end": 18439
            },
            "value": "rootlesskit"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18440,
              "end": 18452
            },
            "value": "/rootlesskit"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18453,
          "end": 18462
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18463,
          "end": 18467
        }
      },
      "options": [
        {
          "flag_start": 18468,
          "name": {
            "span": {
              "start": 18470,
              "end": 18474
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 18475,
          "name": {
            "span": {
              "start": 18477,
              "end": 18481
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 18482,
              "end": 18490
            },
            "value": "binaries"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18491,
              "end": 18492
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18493,
          "end": 18502
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18503,
          "end": 18507
        }
      },
      "options": [
        {
          "flag_start": 18508,
          "name": {
            "span": {
              "start": 18510,
              "end": 18514
            },
            "value": "link"
          },
          "value": null
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18515,
              "end": 18566
            },
            "value": "examples/buildctl-daemonless/buildctl-daemonless.sh"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18567,
          "end": 18576
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "USER",
      "user": {
        "span": {
          "start": 18631,
          "end": 18635
        }
      },
      "arguments": {
        "span": {
          "start": 18636,
          "end": 18645
        },
        "value": "1000:1000"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 18646,
          "end": 18649
        }
      },
      "arguments": {
        "span": {
          "start": 18650,
          "end": 18665
        },
        "value": "HOME=/home/user"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 18666,
          "end": 18669
        }
      },
      "arguments": {
        "span": {
          "start": 18670,
          "end": 18679
        },
        "value": "USER=user"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 18680,
          "end": 18683
        }
      },
      "arguments": {
        "span": {
          "start": 18684,
          "end": 18714
        },
        "value": "XDG_RUNTIME_DIR=/run/user/1000"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 18715,
          "end": 18718
        }
      },
      "arguments": {
        "span": {
          "start": 18719,
          "end": 18747
        },
        "value": "TMPDIR=/home/user/.local/tmp"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 18748,
          "end": 18751
        }
      },
      "arguments": {
        "span": {
          "start": 18752,
          "end": 18811
        },
        "value": "BUILDKIT_HOST=unix:///run/user/1000/buildkit/buildkitd.sock"
      }
    },
    {
      "kind": "VOLUME",
      "volume": {
        "span": {
          "start": 18812,
          "end": 18818
        }
      },
      "arguments": {
        "string": [
          {
            "span": {
              "start": 18819,
              "end": 18851
            },
            "value": "/home/user/.local/share/buildkit"
          }
        ]
      }
    },
    {
      "kind": "ENTRYPOINT",
      "entrypoint": {
        "span": {
          "start": 18852,
          "end": 18862
        }
      },
      "arguments": {
        "exec": {
          "span": {
            "start": 18863,
            "end": 18891
          },
          "value": [
            {
              "span": {
                "start": 18865,
                "end": 18876
              },
              "value": "rootlesskit"
            },
            {
              "span": {
                "start": 18880,
                "end": 18889
              },
              "value": "buildkitd"
            }
          ]
        }
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 18940,
          "end": 18944
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 18945,
          "end": 18988
        },
        "value": "buildkit-$TARGETOS${BUILDKIT_DEBUG:+-debug}"
      },
      "as_": [
        {
          "span": {
            "start": 18989,
            "end": 18991
          }
        },
        {
          "span": {
            "start": 18992,
            "end": 19000
          },
          "value": "buildkit"
        }
      ]
    }
  ]
}