{
  "parser_directives": {
    "syntax": {
      "start": 2,
      "value": {
        "span": {
          "start": 9,
          "end": 42
        },
        "value": "docker/dockerfile-upstream:master"
      }
    },
    "escape": null,
    "check": null
  },
  "instructions": [
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 44,
          "end": 47
        }
      },
      "arguments": {
        "span": {
          "start": 48,
          "end": 67
        },
        "value": "RUNC_VERSION=v1.3.4"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 68,
          "end": 71
        }
      },
      "arguments": {
        "span": {
          "start": 72,
          "end": 97
        },
        "value": "CONTAINERD_VERSION=v2.2.1"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 185,
          "end": 188
        }
      },
      "arguments": {
        "span": {
          "start": 189,
          "end": 221
        },
        "value": "CONTAINERD_ALT_VERSION_21=v2.1.6"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 222,
          "end": 225
        }
      },
      "arguments": {
        "span": {
          "start": 226,
          "end": 259
        },
        "value": "CONTAINERD_ALT_VERSION_17=v1.7.30"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 260,
          "end": 263
        }
      },
      "arguments": {
        "span": {
          "start": 264,
          "end": 287
        },
        "value": "REGISTRY_VERSION=v2.8.3"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 288,
          "end": 291
        }
      },
      "arguments": {
        "span": {
          "start": 292,
          "end": 318
        },
        "value": "ROOTLESSKIT_VERSION=v2.3.6"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 319,
          "end": 322
        }
      },
      "arguments": {
        "span": {
          "start": 323,
          "end": 341
        },
        "value": "CNI_VERSION=v1.9.0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 342,
          "end": 345
        }
      },
      "arguments": {
        "span": {
          "start": 346,
          "end": 380
        },
        "value": "STARGZ_SNAPSHOTTER_VERSION=v0.18.1"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 381,
          "end": 384
        }
      },
      "arguments": {
        "span": {
          "start": 385,
          "end": 407
        },
        "value": "NERDCTL_VERSION=v2.2.0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 408,
          "end": 411
        }
      },
      "arguments": {
        "span": {
          "start": 412,
          "end": 434
        },
        "value": "DNSNAME_VERSION=v1.3.1"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 435,
          "end": 438
        }
      },
      "arguments": {
        "span": {
          "start": 439,
          "end": 459
        },
        "value": "NYDUS_VERSION=v2.3.9"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 460,
          "end": 463
        }
      },
      "arguments": {
        "span": {
          "start": 464,
          "end": 506
        },
        "value": "MINIO_VERSION=RELEASE.2025-09-07T16-13-09Z"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 507,
          "end": 510
        }
      },
      "arguments": {
        "span": {
          "start": 511,
          "end": 556
        },
        "value": "MINIO_MC_VERSION=RELEASE.2025-08-13T08-35-41Z"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 557,
          "end": 560
        }
      },
      "arguments": {
        "span": {
          "start": 561,
          "end": 583
        },
        "value": "AZURITE_VERSION=3.35.0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 584,
          "end": 587
        }
      },
      "arguments": {
        "span": {
          "start": 588,
          "end": 613
        },
        "value": "GOTESTSUM_VERSION=v1.13.0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 614,
          "end": 617
        }
      },
      "arguments": {
        "span": {
          "start": 618,
          "end": 639
        },
        "value": "DELVE_VERSION=v1.25.2"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 640,
          "end": 643
        }
      },
      "arguments": {
        "span": {
          "start": 644,
          "end": 663
        },
        "value": "DOCKER_VERSION=29.1"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 664,
          "end": 667
        }
      },
      "arguments": {
        "span": {
          "start": 668,
          "end": 704
        },
        "value": "DOCKER_CLI_VERSION=${DOCKER_VERSION}"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 705,
          "end": 708
        }
      },
      "arguments": {
        "span": {
          "start": 709,
          "end": 730
        },
        "value": "BUILDX_VERSION=0.30.1"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 732,
          "end": 735
        }
      },
      "arguments": {
        "span": {
          "start": 736,
          "end": 754
        },
        "value": "EXPORT_BASE=alpine"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 755,
          "end": 758
        }
      },
      "arguments": {
        "span": {
          "start": 759,
          "end": 778
        },
        "value": "ALPINE_VERSION=3.23"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 779,
          "end": 782
        }
      },
      "arguments": {
        "span": {
          "start": 783,
          "end": 803
        },
        "value": "UBUNTU_VERSION=24.04"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 805,
          "end": 808
        }
      },
      "arguments": {
        "span": {
          "start": 809,
          "end": 824
        },
        "value": "GO_VERSION=1.25"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 825,
          "end": 828
        }
      },
      "arguments": {
        "span": {
          "start": 829,
          "end": 845
        },
        "value": "XX_VERSION=1.9.0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 846,
          "end": 849
        }
      },
      "arguments": {
        "span": {
          "start": 850,
          "end": 864
        },
        "value": "BUILDKIT_DEBUG"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 899,
          "end": 903
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 904,
          "end": 940
        },
        "value": "quay.io/minio/minio:${MINIO_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 941,
            "end": 943
          }
        },
        {
          "span": {
            "start": 944,
            "end": 949
          },
          "value": "minio"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 950,
          "end": 954
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 955,
          "end": 991
        },
        "value": "quay.io/minio/mc:${MINIO_MC_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 992,
            "end": 994
          }
        },
        {
          "span": {
            "start": 995,
            "end": 1003
          },
          "value": "minio-mc"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 1044,
          "end": 1048
        }
      },
      "options": [
        {
          "flag_start": 1049,
          "name": {
            "span": {
              "start": 1051,
              "end": 1059
            },
            "value": "platform"
          },
          "value": {
            "span": {
              "start": 1060,
              "end": 1074
            },
            "value": "$BUILDPLATFORM"
          }
        }
      ],
      "image": {
        "span": {
          "start": 1075,
          "end": 1102
        },
        "value": "tonistiigi/xx:${XX_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 1103,
            "end": 1105
          }
        },
        {
          "span": {
            "start": 1106,
            "end": 1108
          },
          "value": "xx"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 1148,
          "end": 1152
        }
      },
      "options": [
        {
          "flag_start": 1153,
          "name": {
            "span": {
              "start": 1155,
              "end": 1163
            },
            "value": "platform"
          },
          "value": {
            "span": {
              "start": 1164,
              "end": 1178
            },
            "value": "$BUILDPLATFORM"
          }
        }
      ],
      "image": {
        "span": {
          "start": 1179,
          "end": 1223
        },
        "value": "golang:${GO_VERSION}-alpine${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 1224,
            "end": 1226
          }
        },
        {
          "span": {
            "start": 1227,
            "end": 1235
          },
          "value": "golatest"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 1237,
          "end": 1241
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 1242,
          "end": 1271
        },
        "value": "moby/moby-bin:$DOCKER_VERSION"
      },
      "as_": [
        {
          "span": {
            "start": 1272,
            "end": 1274
          }
        },
        {
          "span": {
            "start": 1275,
            "end": 1288
          },
          "value": "docker-engine"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 1289,
          "end": 1293
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 1294,
          "end": 1331
        },
        "value": "dockereng/cli-bin:$DOCKER_CLI_VERSION"
      },
      "as_": [
        {
          "span": {
            "start": 1332,
            "end": 1334
          }
        },
        {
          "span": {
            "start": 1335,
            "end": 1345
          },
          "value": "docker-cli"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 1346,
          "end": 1350
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 1351,
          "end": 1384
        },
        "value": "docker/buildx-bin:$BUILDX_VERSION"
      },
      "as_": [
        {
          "span": {
            "start": 1385,
            "end": 1387
          }
        },
        {
          "span": {
            "start": 1388,
            "end": 1401
          },
          "value": "docker-buildx"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 1453,
          "end": 1457
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 1458,
          "end": 1466
        },
        "value": "golatest"
      },
      "as_": [
        {
          "span": {
            "start": 1467,
            "end": 1469
          }
        },
        {
          "span": {
            "start": 1470,
            "end": 1482
          },
          "value": "gobuild-base"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 1483,
          "end": 1486
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 1487,
            "end": 1553
          },
          "value": "apk add --no-cache file bash clang lld musl-dev pkgconfig git make"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 1554,
          "end": 1558
        }
      },
      "options": [
        {
          "flag_start": 1559,
          "name": {
            "span": {
              "start": 1561,
              "end": 1565
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 1566,
          "name": {
            "span": {
              "start": 1568,
              "end": 1572
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 1573,
              "end": 1575
            },
            "value": "xx"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 1576,
              "end": 1577
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 1578,
          "end": 1579
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 1607,
          "end": 1611
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 1612,
          "end": 1624
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 1625,
            "end": 1627
          }
        },
        {
          "span": {
            "start": 1628,
            "end": 1632
          },
          "value": "runc"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 1633,
          "end": 1640
        }
      },
      "arguments": {
        "span": {
          "start": 1641,
          "end": 1683
        },
        "value": "$GOPATH/src/github.com/opencontainers/runc"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 1684,
          "end": 1687
        }
      },
      "arguments": {
        "span": {
          "start": 1688,
          "end": 1700
        },
        "value": "RUNC_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 1701,
          "end": 1704
        }
      },
      "options": [
        {
          "flag_start": 1705,
          "name": {
            "span": {
              "start": 1707,
              "end": 1719
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 1720,
              "end": 1724
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 1725,
              "end": 1783
            },
            "value": "\"https://github.com/opencontainers/runc.git#$RUNC_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 1784,
          "end": 1785
        },
        "value": "."
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 1786,
          "end": 1789
        }
      },
      "arguments": {
        "span": {
          "start": 1790,
          "end": 1804
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 1910,
          "end": 1913
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 1914,
            "end": 2075
          },
          "value": "set -e; xx-apk add musl-dev gcc libseccomp-dev libseccomp-static; \\\n  [ \"$(xx-info arch)\" != \"ppc64le\" ] || XX_CC_PREFER_LINKER=ld xx-clang --setup-target-triple"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 2076,
          "end": 2079
        }
      },
      "options": [
        {
          "flag_start": 2080,
          "name": {
            "span": {
              "start": 2082,
              "end": 2087
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 2088,
              "end": 2118
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 2124,
            "end": 2124
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 2125,
            "end": 2387
          },
          "expand": true,
          "value": "  set -ex\n  CGO_ENABLED=1 xx-go build -mod=vendor -ldflags '-extldflags -static' -tags 'apparmor seccomp netgo cgo static_build osusergo' -o /usr/bin/runc ./\n  xx-verify --static /usr/bin/runc\n  if [ \"$(xx-info os)\" = \"linux\" ]; then /usr/bin/runc --version; fi\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 2392,
          "end": 2396
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 2397,
          "end": 2409
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 2410,
            "end": 2412
          }
        },
        {
          "span": {
            "start": 2413,
            "end": 2426
          },
          "value": "buildkit-base"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 2427,
          "end": 2434
        }
      },
      "arguments": {
        "span": {
          "start": 2435,
          "end": 2439
        },
        "value": "/src"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 2440,
          "end": 2443
        }
      },
      "arguments": {
        "span": {
          "start": 2444,
          "end": 2463
        },
        "value": "GOFLAGS=-mod=vendor"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 2524,
          "end": 2528
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 2529,
          "end": 2542
        },
        "value": "buildkit-base"
      },
      "as_": [
        {
          "span": {
            "start": 2543,
            "end": 2545
          }
        },
        {
          "span": {
            "start": 2546,
            "end": 2562
          },
          "value": "buildkit-version"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 2610,
          "end": 2613
        }
      },
      "options": [
        {
          "flag_start": 2614,
          "name": {
            "span": {
              "start": 2616,
              "end": 2621
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 2622,
              "end": 2630
            },
            "value": "target=."
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 2638,
            "end": 2638
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 2639,
            "end": 3840
          },
          "expand": false,
          "value": "  # if git is worktree (file starting with gitdir:) then skip verions check\n  if [ -f .git ] && head -1 .git | grep -q \"^gitdir:\"; then\n    echo >&2 \"Skipping version check for worktree\"\n    # set dev stubs\n    echo \"-X github.com/moby/buildkit/version.Version=dev -X github.com/moby/buildkit/version.Revision=dev -X github.com/moby/buildkit/version.Package=github.com/moby/buildkit\" > /tmp/.ldflags;\n    echo -n \"dev\" > /tmp/.version;\n    echo -n \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\" > /tmp/.commit_date;\n    exit 0\n  fi\n  if ! git rev-parse HEAD 2>/dev/null; then\n    echo >&2 \"Failed to get git revision, make sure --build-arg BUILDKIT_CONTEXT_KEEP_GIT_DIR=1 is set when building from Git directly\"\n    exit 1\n  fi\n  set -ex\n  export PKG=github.com/moby/buildkit VERSION=$(git describe --match 'v[0-9]*' --dirty='.m' --always --tags) REVISION=$(git rev-parse HEAD)$(if ! git diff --no-ext-diff --quiet --exit-code; then echo .m; fi) COMMIT_DATE=$(git show -s --format=%cI HEAD);\n  echo \"-X ${PKG}/version.Version=${VERSION} -X ${PKG}/version.Revision=${REVISION} -X ${PKG}/version.Package=${PKG}\" > /tmp/.ldflags;\n  echo -n \"${VERSION}\" > /tmp/.version;\n  echo -n \"${COMMIT_DATE}\" > /tmp/.commit_date;\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 3879,
          "end": 3883
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 3884,
          "end": 3897
        },
        "value": "buildkit-base"
      },
      "as_": [
        {
          "span": {
            "start": 3898,
            "end": 3900
          }
        },
        {
          "span": {
            "start": 3901,
            "end": 3909
          },
          "value": "buildctl"
        }
      ]
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 3910,
          "end": 3913
        }
      },
      "arguments": {
        "span": {
          "start": 3914,
          "end": 3927
        },
        "value": "CGO_ENABLED=0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 3928,
          "end": 3931
        }
      },
      "arguments": {
        "span": {
          "start": 3932,
          "end": 3946
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 3947,
          "end": 3950
        }
      },
      "arguments": {
        "span": {
          "start": 3951,
          "end": 3963
        },
        "value": "GOBUILDFLAGS"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 3964,
          "end": 3967
        }
      },
      "options": [
        {
          "flag_start": 3968,
          "name": {
            "span": {
              "start": 3970,
              "end": 3975
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 3976,
              "end": 3984
            },
            "value": "target=."
          }
        },
        {
          "flag_start": 3985,
          "name": {
            "span": {
              "start": 3987,
              "end": 3992
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 3993,
              "end": 4023
            },
            "value": "target=/root/.cache,type=cache"
          }
        },
        {
          "flag_start": 4028,
          "name": {
            "span": {
              "start": 4030,
              "end": 4035
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 4036,
              "end": 4065
            },
            "value": "target=/go/pkg/mod,type=cache"
          }
        },
        {
          "flag_start": 4070,
          "name": {
            "span": {
              "start": 4072,
              "end": 4077
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 4078,
              "end": 4141
            },
            "value": "source=/tmp/.ldflags,target=/tmp/.ldflags,from=buildkit-version"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 4147,
            "end": 4147
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 4148,
            "end": 4368
          },
          "expand": true,
          "value": "  set -ex\n  xx-go build ${GOBUILDFLAGS} -ldflags \"$(cat /tmp/.ldflags)\" -o /usr/bin/buildctl ./cmd/buildctl\n  xx-verify --static /usr/bin/buildctl\n  if [ \"$(xx-info os)\" = \"linux\" ]; then /usr/bin/buildctl --version; fi\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 4406,
          "end": 4410
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 4411,
          "end": 4424
        },
        "value": "buildkit-base"
      },
      "as_": [
        {
          "span": {
            "start": 4425,
            "end": 4427
          }
        },
        {
          "span": {
            "start": 4428,
            "end": 4437
          },
          "value": "buildkitd"
        }
      ]
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 4512,
          "end": 4515
        }
      },
      "arguments": {
        "span": {
          "start": 4516,
          "end": 4530
        },
        "value": "BUILDKITD_TAGS"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 4531,
          "end": 4534
        }
      },
      "arguments": {
        "span": {
          "start": 4535,
          "end": 4549
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 4550,
          "end": 4553
        }
      },
      "arguments": {
        "span": {
          "start": 4554,
          "end": 4566
        },
        "value": "GOBUILDFLAGS"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 4567,
          "end": 4570
        }
      },
      "arguments": {
        "span": {
          "start": 4571,
          "end": 4593
        },
        "value": "VERIFYFLAGS=\"--static\""
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 4594,
          "end": 4597
        }
      },
      "arguments": {
        "span": {
          "start": 4598,
          "end": 4611
        },
        "value": "CGO_ENABLED=0"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 4612,
          "end": 4615
        }
      },
      "arguments": {
        "span": {
          "start": 4616,
          "end": 4630
        },
        "value": "BUILDKIT_DEBUG"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 4631,
          "end": 4634
        }
      },
      "arguments": {
        "span": {
          "start": 4635,
          "end": 4675
        },
        "value": "GOGCFLAGS=${BUILDKIT_DEBUG:+\"all=-N -l\"}"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 4676,
          "end": 4679
        }
      },
      "options": [
        {
          "flag_start": 4680,
          "name": {
            "span": {
              "start": 4682,
              "end": 4687
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 4688,
              "end": 4696
            },
            "value": "target=."
          }
        },
        {
          "flag_start": 4697,
          "name": {
            "span": {
              "start": 4699,
              "end": 4704
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 4705,
              "end": 4735
            },
            "value": "target=/root/.cache,type=cache"
          }
        },
        {
          "flag_start": 4740,
          "name": {
            "span": {
              "start": 4742,
              "end": 4747
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 4748,
              "end": 4777
            },
            "value": "target=/go/pkg/mod,type=cache"
          }
        },
        {
          "flag_start": 4782,
          "name": {
            "span": {
              "start": 4784,
              "end": 4789
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 4790,
              "end": 4853
            },
            "value": "source=/tmp/.ldflags,target=/tmp/.ldflags,from=buildkit-version"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 4859,
            "end": 4859
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 4860,
            "end": 5920
          },
          "expand": true,
          "value": "  set -ex\n  xx-go build ${GOBUILDFLAGS} -gcflags=\"${GOGCFLAGS}\" -ldflags \"$(cat /tmp/.ldflags) -extldflags '-static'\" -tags \"osusergo netgo static_build seccomp ${BUILDKITD_TAGS}\" -o /usr/bin/buildkitd ./cmd/buildkitd\n  xx-verify ${VERIFYFLAGS} /usr/bin/buildkitd\n\n  # buildkitd --version can be flaky when running through emulation related to\n  # https://github.com/moby/buildkit/pull/4491. Retry a few times as a workaround.\n  set +ex\n  if [ \"$(xx-info os)\" = \"linux\" ]; then\n    max_retries=5\n    for attempt in $(seq \"$max_retries\"); do\n      timeout 3 /usr/bin/buildkitd --version\n      exitcode=$?\n      if ! xx-info is-cross; then\n        exit $exitcode\n      elif [ $exitcode -eq 0 ]; then\n        break\n      elif [ $exitcode -eq 124 ] || [ $exitcode -eq 143 ]; then\n        echo \"WARN: buildkitd --version timed out ($attempt/$max_retries)\"\n        if [ \"$attempt\" -eq \"$max_retries\" ]; then\n          exit $exitcode\n        fi\n      else\n        echo \"ERROR: buildkitd --version failed with exit code $exitcode\"\n      fi\n      sleep 1\n    done\n  fi\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 5973,
          "end": 5977
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 5978,
          "end": 5990
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 5991,
            "end": 5993
          }
        },
        {
          "span": {
            "start": 5994,
            "end": 6001
          },
          "value": "dnsname"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 6002,
          "end": 6009
        }
      },
      "arguments": {
        "span": {
          "start": 6010,
          "end": 6047
        },
        "value": "/go/src/github.com/containers/dnsname"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 6048,
          "end": 6051
        }
      },
      "arguments": {
        "span": {
          "start": 6052,
          "end": 6067
        },
        "value": "DNSNAME_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 6068,
          "end": 6071
        }
      },
      "options": [
        {
          "flag_start": 6072,
          "name": {
            "span": {
              "start": 6074,
              "end": 6086
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 6087,
              "end": 6091
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6092,
              "end": 6152
            },
            "value": "\"https://github.com/containers/dnsname.git#$DNSNAME_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6153,
          "end": 6154
        },
        "value": "."
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 6155,
          "end": 6158
        }
      },
      "arguments": {
        "span": {
          "start": 6159,
          "end": 6173
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 6174,
          "end": 6177
        }
      },
      "options": [
        {
          "flag_start": 6178,
          "name": {
            "span": {
              "start": 6180,
              "end": 6185
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 6186,
              "end": 6216
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 6223,
            "end": 6336
          },
          "value": "CGO_ENABLED=0 xx-go build -o /usr/bin/dnsname ./plugins/meta/dnsname && \\\n    xx-verify --static /usr/bin/dnsname"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 6338,
          "end": 6342
        }
      },
      "options": [
        {
          "flag_start": 6343,
          "name": {
            "span": {
              "start": 6345,
              "end": 6353
            },
            "value": "platform"
          },
          "value": {
            "span": {
              "start": 6354,
              "end": 6368
            },
            "value": "$BUILDPLATFORM"
          }
        }
      ],
      "image": {
        "span": {
          "start": 6369,
          "end": 6393
        },
        "value": "alpine:${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 6394,
            "end": 6396
          }
        },
        {
          "span": {
            "start": 6397,
            "end": 6408
          },
          "value": "cni-plugins"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 6409,
          "end": 6412
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 6413,
            "end": 6436
          },
          "value": "apk add --no-cache curl"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6437,
          "end": 6441
        }
      },
      "options": [
        {
          "flag_start": 6442,
          "name": {
            "span": {
              "start": 6444,
              "end": 6448
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6449,
              "end": 6451
            },
            "value": "xx"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6452,
              "end": 6453
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6454,
          "end": 6455
        },
        "value": "/"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 6456,
          "end": 6459
        }
      },
      "arguments": {
        "span": {
          "start": 6460,
          "end": 6471
        },
        "value": "CNI_VERSION"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 6472,
          "end": 6475
        }
      },
      "arguments": {
        "span": {
          "start": 6476,
          "end": 6484
        },
        "value": "TARGETOS"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 6485,
          "end": 6488
        }
      },
      "arguments": {
        "span": {
          "start": 6489,
          "end": 6499
        },
        "value": "TARGETARCH"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 6500,
          "end": 6503
        }
      },
      "arguments": {
        "span": {
          "start": 6504,
          "end": 6518
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 6519,
          "end": 6526
        }
      },
      "arguments": {
        "span": {
          "start": 6527,
          "end": 6539
        },
        "value": "/opt/cni/bin"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 6540,
          "end": 6543
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 6544,
            "end": 6701
          },
          "value": "curl -fsSL https://github.com/containernetworking/plugins/releases/download/${CNI_VERSION}/cni-plugins-${TARGETOS}-${TARGETARCH}-${CNI_VERSION}.tgz | tar xzv"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 6702,
          "end": 6705
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 6706,
            "end": 6751
          },
          "value": "xx-verify --static bridge loopback host-local"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6752,
          "end": 6756
        }
      },
      "options": [
        {
          "flag_start": 6757,
          "name": {
            "span": {
              "start": 6759,
              "end": 6763
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 6764,
          "name": {
            "span": {
              "start": 6766,
              "end": 6770
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6771,
              "end": 6778
            },
            "value": "dnsname"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6779,
              "end": 6795
            },
            "value": "/usr/bin/dnsname"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6796,
          "end": 6809
        },
        "value": "/opt/cni/bin/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 6811,
          "end": 6815
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 6816,
          "end": 6823
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 6824,
            "end": 6826
          }
        },
        {
          "span": {
            "start": 6827,
            "end": 6845
          },
          "value": "cni-plugins-export"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6846,
          "end": 6850
        }
      },
      "options": [
        {
          "flag_start": 6851,
          "name": {
            "span": {
              "start": 6853,
              "end": 6857
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 6858,
          "name": {
            "span": {
              "start": 6860,
              "end": 6864
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6865,
              "end": 6876
            },
            "value": "cni-plugins"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6877,
              "end": 6896
            },
            "value": "/opt/cni/bin/bridge"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6897,
          "end": 6917
        },
        "value": "/buildkit-cni-bridge"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6918,
          "end": 6922
        }
      },
      "options": [
        {
          "flag_start": 6923,
          "name": {
            "span": {
              "start": 6925,
              "end": 6929
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 6930,
          "name": {
            "span": {
              "start": 6932,
              "end": 6936
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 6937,
              "end": 6948
            },
            "value": "cni-plugins"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 6949,
              "end": 6970
            },
            "value": "/opt/cni/bin/loopback"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 6971,
          "end": 6993
        },
        "value": "/buildkit-cni-loopback"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 6994,
          "end": 6998
        }
      },
      "options": [
        {
          "flag_start": 6999,
          "name": {
            "span": {
              "start": 7001,
              "end": 7005
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7006,
          "name": {
            "span": {
              "start": 7008,
              "end": 7012
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7013,
              "end": 7024
            },
            "value": "cni-plugins"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7025,
              "end": 7048
            },
            "value": "/opt/cni/bin/host-local"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7049,
          "end": 7073
        },
        "value": "/buildkit-cni-host-local"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7074,
          "end": 7078
        }
      },
      "options": [
        {
          "flag_start": 7079,
          "name": {
            "span": {
              "start": 7081,
              "end": 7085
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7086,
          "name": {
            "span": {
              "start": 7088,
              "end": 7092
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7093,
              "end": 7104
            },
            "value": "cni-plugins"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7105,
              "end": 7126
            },
            "value": "/opt/cni/bin/firewall"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7127,
          "end": 7149
        },
        "value": "/buildkit-cni-firewall"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 7151,
          "end": 7155
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 7156,
          "end": 7163
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 7164,
            "end": 7166
          }
        },
        {
          "span": {
            "start": 7167,
            "end": 7194
          },
          "value": "cni-plugins-export-squashed"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7195,
          "end": 7199
        }
      },
      "options": [
        {
          "flag_start": 7200,
          "name": {
            "span": {
              "start": 7202,
              "end": 7206
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7207,
              "end": 7225
            },
            "value": "cni-plugins-export"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7226,
              "end": 7227
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7228,
          "end": 7229
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 7231,
          "end": 7235
        }
      },
      "options": [
        {
          "flag_start": 7236,
          "name": {
            "span": {
              "start": 7238,
              "end": 7246
            },
            "value": "platform"
          },
          "value": {
            "span": {
              "start": 7247,
              "end": 7261
            },
            "value": "$BUILDPLATFORM"
          }
        }
      ],
      "image": {
        "span": {
          "start": 7262,
          "end": 7286
        },
        "value": "alpine:${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 7287,
            "end": 7289
          }
        },
        {
          "span": {
            "start": 7290,
            "end": 7303
          },
          "value": "binfmt-filter"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7389,
          "end": 7393
        }
      },
      "options": [
        {
          "flag_start": 7394,
          "name": {
            "span": {
              "start": 7396,
              "end": 7400
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7401,
          "name": {
            "span": {
              "start": 7403,
              "end": 7407
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7408,
              "end": 7517
            },
            "value": "tonistiigi/binfmt:buildkit-v10.0.4-57@sha256:370775754cd56094fff210b44968bf15777aed7eb3302df4f7ab2b647630899e"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7518,
              "end": 7519
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7520,
          "end": 7525
        },
        "value": "/out/"
      }
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 7526,
          "end": 7533
        }
      },
      "arguments": {
        "span": {
          "start": 7534,
          "end": 7539
        },
        "value": "/out/"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 7540,
          "end": 7543
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 7544,
            "end": 7619
          },
          "value": "rm -f buildkit-qemu-loongarch64 buildkit-qemu-mips64 buildkit-qemu-mips64el"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 7621,
          "end": 7625
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 7626,
          "end": 7633
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 7634,
            "end": 7636
          }
        },
        {
          "span": {
            "start": 7637,
            "end": 7651
          },
          "value": "binaries-linux"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7652,
          "end": 7656
        }
      },
      "options": [
        {
          "flag_start": 7657,
          "name": {
            "span": {
              "start": 7659,
              "end": 7663
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7664,
          "name": {
            "span": {
              "start": 7666,
              "end": 7670
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7671,
              "end": 7675
            },
            "value": "runc"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7676,
              "end": 7689
            },
            "value": "/usr/bin/runc"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7690,
          "end": 7704
        },
        "value": "/buildkit-runc"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7705,
          "end": 7709
        }
      },
      "options": [
        {
          "flag_start": 7710,
          "name": {
            "span": {
              "start": 7712,
              "end": 7716
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7717,
          "name": {
            "span": {
              "start": 7719,
              "end": 7723
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7724,
              "end": 7737
            },
            "value": "binfmt-filter"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7738,
              "end": 7743
            },
            "value": "/out/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7744,
          "end": 7745
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7746,
          "end": 7750
        }
      },
      "options": [
        {
          "flag_start": 7751,
          "name": {
            "span": {
              "start": 7753,
              "end": 7757
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7758,
          "name": {
            "span": {
              "start": 7760,
              "end": 7764
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7765,
              "end": 7792
            },
            "value": "cni-plugins-export-squashed"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7793,
              "end": 7794
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7795,
          "end": 7796
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7797,
          "end": 7801
        }
      },
      "options": [
        {
          "flag_start": 7802,
          "name": {
            "span": {
              "start": 7804,
              "end": 7808
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7809,
          "name": {
            "span": {
              "start": 7811,
              "end": 7815
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7816,
              "end": 7824
            },
            "value": "buildctl"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7825,
              "end": 7842
            },
            "value": "/usr/bin/buildctl"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7843,
          "end": 7844
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7845,
          "end": 7849
        }
      },
      "options": [
        {
          "flag_start": 7850,
          "name": {
            "span": {
              "start": 7852,
              "end": 7856
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7857,
          "name": {
            "span": {
              "start": 7859,
              "end": 7863
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7864,
              "end": 7873
            },
            "value": "buildkitd"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7874,
              "end": 7892
            },
            "value": "/usr/bin/buildkitd"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7893,
          "end": 7894
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 7896,
          "end": 7900
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 7901,
          "end": 7908
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 7909,
            "end": 7911
          }
        },
        {
          "span": {
            "start": 7912,
            "end": 7927
          },
          "value": "binaries-darwin"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 7928,
          "end": 7932
        }
      },
      "options": [
        {
          "flag_start": 7933,
          "name": {
            "span": {
              "start": 7935,
              "end": 7939
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 7940,
          "name": {
            "span": {
              "start": 7942,
              "end": 7946
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 7947,
              "end": 7955
            },
            "value": "buildctl"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 7956,
              "end": 7973
            },
            "value": "/usr/bin/buildctl"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 7974,
          "end": 7975
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 7977,
          "end": 7981
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 7982,
          "end": 7989
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 7990,
            "end": 7992
          }
        },
        {
          "span": {
            "start": 7993,
            "end": 8009
          },
          "value": "binaries-windows"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 8010,
          "end": 8014
        }
      },
      "options": [
        {
          "flag_start": 8015,
          "name": {
            "span": {
              "start": 8017,
              "end": 8021
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 8022,
          "name": {
            "span": {
              "start": 8024,
              "end": 8028
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 8029,
              "end": 8037
            },
            "value": "buildctl"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 8038,
              "end": 8055
            },
            "value": "/usr/bin/buildctl"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 8056,
          "end": 8069
        },
        "value": "/buildctl.exe"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 8070,
          "end": 8074
        }
      },
      "options": [
        {
          "flag_start": 8075,
          "name": {
            "span": {
              "start": 8077,
              "end": 8081
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 8082,
          "name": {
            "span": {
              "start": 8084,
              "end": 8088
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 8089,
              "end": 8098
            },
            "value": "buildkitd"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 8099,
              "end": 8117
            },
            "value": "/usr/bin/buildkitd"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 8118,
          "end": 8132
        },
        "value": "/buildkitd.exe"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 8134,
          "end": 8138
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 8139,
          "end": 8146
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 8147,
            "end": 8149
          }
        },
        {
          "span": {
            "start": 8150,
            "end": 8166
          },
          "value": "binaries-freebsd"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 8167,
          "end": 8171
        }
      },
      "options": [
        {
          "flag_start": 8172,
          "name": {
            "span": {
              "start": 8174,
              "end": 8178
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 8179,
          "name": {
            "span": {
              "start": 8181,
              "end": 8185
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 8186,
              "end": 8195
            },
            "value": "buildkitd"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 8196,
              "end": 8214
            },
            "value": "/usr/bin/buildkitd"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 8215,
          "end": 8216
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 8217,
          "end": 8221
        }
      },
      "options": [
        {
          "flag_start": 8222,
          "name": {
            "span": {
              "start": 8224,
              "end": 8228
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 8229,
          "name": {
            "span": {
              "start": 8231,
              "end": 8235
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 8236,
              "end": 8244
            },
            "value": "buildctl"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 8245,
              "end": 8262
            },
            "value": "/usr/bin/buildctl"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 8263,
          "end": 8264
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 8266,
          "end": 8270
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 8271,
          "end": 8289
        },
        "value": "binaries-$TARGETOS"
      },
      "as_": [
        {
          "span": {
            "start": 8290,
            "end": 8292
          }
        },
        {
          "span": {
            "start": 8293,
            "end": 8301
          },
          "value": "binaries"
        }
      ]
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 8366,
          "end": 8369
        }
      },
      "arguments": {
        "span": {
          "start": 8370,
          "end": 8399
        },
        "value": "BUILDKIT_SBOM_SCAN_STAGE=true"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 8401,
          "end": 8405
        }
      },
      "options": [
        {
          "flag_start": 8406,
          "name": {
            "span": {
              "start": 8408,
              "end": 8416
            },
            "value": "platform"
          },
          "value": {
            "span": {
              "start": 8417,
              "end": 8431
            },
            "value": "$BUILDPLATFORM"
          }
        }
      ],
      "image": {
        "span": {
          "start": 8432,
          "end": 8456
        },
        "value": "alpine:${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 8457,
            "end": 8459
          }
        },
        {
          "span": {
            "start": 8460,
            "end": 8468
          },
          "value": "releaser"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 8469,
          "end": 8472
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 8473,
            "end": 8500
          },
          "value": "apk add --no-cache tar gzip"
        }
      },
      "here_docs": []
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 8501,
          "end": 8508
        }
      },
      "arguments": {
        "span": {
          "start": 8509,
          "end": 8514
        },
        "value": "/work"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 8515,
          "end": 8518
        }
      },
      "arguments": {
        "span": {
          "start": 8519,
          "end": 8533
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 8534,
          "end": 8537
        }
      },
      "options": [
        {
          "flag_start": 8538,
          "name": {
            "span": {
              "start": 8540,
              "end": 8545
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 8546,
              "end": 8559
            },
            "value": "from=binaries"
          }
        },
        {
          "flag_start": 8564,
          "name": {
            "span": {
              "start": 8566,
              "end": 8571
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 8572,
              "end": 8635
            },
            "value": "source=/tmp/.version,target=/tmp/.version,from=buildkit-version"
          }
        },
        {
          "flag_start": 8640,
          "name": {
            "span": {
              "start": 8642,
              "end": 8647
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 8648,
              "end": 8719
            },
            "value": "source=/tmp/.commit_date,target=/tmp/.commit_date,from=buildkit-version"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 8724,
            "end": 8907
          },
          "value": "mkdir -p /out && tar czvf \"/out/buildkit-$(cat /tmp/.version).$(echo $TARGETPLATFORM | sed 's/\\//-/g').tar.gz\" --mtime=\"$(cat /tmp/.commit_date)\" --sort=name --transform 's/^./bin/' ."
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 8909,
          "end": 8913
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 8914,
          "end": 8921
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 8922,
            "end": 8924
          }
        },
        {
          "span": {
            "start": 8925,
            "end": 8932
          },
          "value": "release"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 8933,
          "end": 8937
        }
      },
      "options": [
        {
          "flag_start": 8938,
          "name": {
            "span": {
              "start": 8940,
              "end": 8944
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 8945,
          "name": {
            "span": {
              "start": 8947,
              "end": 8951
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 8952,
              "end": 8960
            },
            "value": "releaser"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 8961,
              "end": 8966
            },
            "value": "/out/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 8967,
          "end": 8968
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 8970,
          "end": 8974
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 8975,
          "end": 8999
        },
        "value": "alpine:${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 9000,
            "end": 9002
          }
        },
        {
          "span": {
            "start": 9003,
            "end": 9025
          },
          "value": "buildkit-export-alpine"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 9026,
          "end": 9029
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 9030,
            "end": 9146
          },
          "value": "apk add --no-cache fuse3 git openssh openssl pigz xz iptables ip6tables \\\n  && ln -s fusermount3 /usr/bin/fusermount"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 9147,
          "end": 9151
        }
      },
      "options": [
        {
          "flag_start": 9152,
          "name": {
            "span": {
              "start": 9154,
              "end": 9158
            },
            "value": "link"
          },
          "value": null
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 9159,
              "end": 9210
            },
            "value": "examples/buildctl-daemonless/buildctl-daemonless.sh"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 9211,
          "end": 9220
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "VOLUME",
      "volume": {
        "span": {
          "start": 9221,
          "end": 9227
        }
      },
      "arguments": {
        "string": [
          {
            "span": {
              "start": 9228,
              "end": 9245
            },
            "value": "/var/lib/buildkit"
          }
        ]
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 9247,
          "end": 9251
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 9252,
          "end": 9276
        },
        "value": "ubuntu:${UBUNTU_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 9277,
            "end": 9279
          }
        },
        {
          "span": {
            "start": 9280,
            "end": 9302
          },
          "value": "buildkit-export-ubuntu"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 9303,
          "end": 9306
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 9307,
            "end": 9526
          },
          "value": "apt-get update \\\n  && apt-get install -y --no-install-recommends \\\n    fuse3 \\\n    git \\\n    openssh-client \\\n    openssl \\\n    pigz \\\n    xz-utils \\\n    iptables \\\n    ca-certificates \\\n  && rm -rf /var/lib/apt/lists/*"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 9527,
          "end": 9531
        }
      },
      "options": [
        {
          "flag_start": 9532,
          "name": {
            "span": {
              "start": 9534,
              "end": 9538
            },
            "value": "link"
          },
          "value": null
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 9539,
              "end": 9590
            },
            "value": "examples/buildctl-daemonless/buildctl-daemonless.sh"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 9591,
          "end": 9600
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "VOLUME",
      "volume": {
        "span": {
          "start": 9601,
          "end": 9607
        }
      },
      "arguments": {
        "string": [
          {
            "span": {
              "start": 9608,
              "end": 9625
            },
            "value": "/var/lib/buildkit"
          }
        ]
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 9627,
          "end": 9631
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 9632,
          "end": 9662
        },
        "value": "buildkit-export-${EXPORT_BASE}"
      },
      "as_": [
        {
          "span": {
            "start": 9663,
            "end": 9665
          }
        },
        {
          "span": {
            "start": 9666,
            "end": 9681
          },
          "value": "buildkit-export"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 9682,
          "end": 9685
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 9686,
            "end": 9734
          },
          "value": "mkdir -p /etc/cdi /var/run/cdi /etc/buildkit/cdi"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 9736,
          "end": 9740
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 9741,
          "end": 9753
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 9754,
            "end": 9756
          }
        },
        {
          "span": {
            "start": 9757,
            "end": 9773
          },
          "value": "containerd-build"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 9774,
          "end": 9781
        }
      },
      "arguments": {
        "span": {
          "start": 9782,
          "end": 9822
        },
        "value": "/go/src/github.com/containerd/containerd"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 9823,
          "end": 9826
        }
      },
      "arguments": {
        "span": {
          "start": 9827,
          "end": 9841
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 9935,
          "end": 9938
        }
      },
      "arguments": {
        "span": {
          "start": 9939,
          "end": 10028
        },
        "value": "CGO_ENABLED=1 CGO_LDFLAGS=\"-fuse-ld=lld\" BUILDTAGS=\"no_btrfs nri_no_wasm\" GO111MODULE=off"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 10029,
          "end": 10032
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 10033,
            "end": 10072
          },
          "value": "xx-apk add musl-dev gcc && xx-go --wrap"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 10073,
          "end": 10077
        }
      },
      "options": [
        {
          "flag_start": 10078,
          "name": {
            "span": {
              "start": 10080,
              "end": 10085
            },
            "value": "chmod"
          },
          "value": {
            "span": {
              "start": 10086,
              "end": 10089
            },
            "value": "755"
          }
        }
      ],
      "src": [
        {
          "here_doc": {
            "span": {
              "start": 10107,
              "end": 10591
            },
            "expand": true,
            "value": "#!/bin/sh\nset -ex\nmkdir /out\nif [ \"$(xx-info os)\" = \"linux\" ]; then\n  make bin/containerd\n  make bin/containerd-shim-runc-v2\n  mv bin/containerd bin/containerd-shim* /out\nelse\n  CGO_ENABLED=0 make STATIC=1 binaries\n  if [ \"$(xx-info os)\" = \"windows\" ]; then\n    mv bin/containerd.exe /out\n  else\n    mv bin/containerd /out\n  fi\n  # No shim binary is built for FreeBSD, since containerd v2.0.\n  if ls bin/containerd-shim* >/dev/null 2>&1; then\n    mv bin/containerd-shim* /out\n  fi\nfi\n"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 10097,
          "end": 10106
        },
        "value": "/build.sh"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 10596,
          "end": 10600
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 10601,
          "end": 10617
        },
        "value": "containerd-build"
      },
      "as_": [
        {
          "span": {
            "start": 10618,
            "end": 10620
          }
        },
        {
          "span": {
            "start": 10621,
            "end": 10631
          },
          "value": "containerd"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 10632,
          "end": 10639
        }
      },
      "arguments": {
        "span": {
          "start": 10640,
          "end": 10680
        },
        "value": "/go/src/github.com/containerd/containerd"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 10681,
          "end": 10684
        }
      },
      "arguments": {
        "span": {
          "start": 10685,
          "end": 10703
        },
        "value": "CONTAINERD_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 10704,
          "end": 10707
        }
      },
      "options": [
        {
          "flag_start": 10708,
          "name": {
            "span": {
              "start": 10710,
              "end": 10722
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 10723,
              "end": 10727
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 10728,
              "end": 10794
            },
            "value": "\"https://github.com/containerd/containerd.git#$CONTAINERD_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 10795,
          "end": 10796
        },
        "value": "."
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 10797,
          "end": 10800
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 10801,
            "end": 10810
          },
          "value": "/build.sh"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 10877,
          "end": 10881
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 10882,
          "end": 10898
        },
        "value": "containerd-build"
      },
      "as_": [
        {
          "span": {
            "start": 10899,
            "end": 10901
          }
        },
        {
          "span": {
            "start": 10902,
            "end": 10919
          },
          "value": "containerd-alt-21"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 10920,
          "end": 10927
        }
      },
      "arguments": {
        "span": {
          "start": 10928,
          "end": 10968
        },
        "value": "/go/src/github.com/containerd/containerd"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 10969,
          "end": 10972
        }
      },
      "arguments": {
        "span": {
          "start": 10973,
          "end": 10998
        },
        "value": "CONTAINERD_ALT_VERSION_21"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 10999,
          "end": 11002
        }
      },
      "options": [
        {
          "flag_start": 11003,
          "name": {
            "span": {
              "start": 11005,
              "end": 11017
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 11018,
              "end": 11022
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 11023,
              "end": 11096
            },
            "value": "\"https://github.com/containerd/containerd.git#$CONTAINERD_ALT_VERSION_21\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 11097,
          "end": 11098
        },
        "value": "."
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 11099,
          "end": 11102
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 11103,
            "end": 11112
          },
          "value": "/build.sh"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 11179,
          "end": 11183
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 11184,
          "end": 11200
        },
        "value": "containerd-build"
      },
      "as_": [
        {
          "span": {
            "start": 11201,
            "end": 11203
          }
        },
        {
          "span": {
            "start": 11204,
            "end": 11221
          },
          "value": "containerd-alt-17"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 11222,
          "end": 11229
        }
      },
      "arguments": {
        "span": {
          "start": 11230,
          "end": 11270
        },
        "value": "/go/src/github.com/containerd/containerd"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 11271,
          "end": 11274
        }
      },
      "arguments": {
        "span": {
          "start": 11275,
          "end": 11300
        },
        "value": "CONTAINERD_ALT_VERSION_17"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 11301,
          "end": 11304
        }
      },
      "options": [
        {
          "flag_start": 11305,
          "name": {
            "span": {
              "start": 11307,
              "end": 11319
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 11320,
              "end": 11324
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 11325,
              "end": 11398
            },
            "value": "\"https://github.com/containerd/containerd.git#$CONTAINERD_ALT_VERSION_17\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 11399,
          "end": 11400
        },
        "value": "."
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 11401,
          "end": 11404
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 11405,
            "end": 11414
          },
          "value": "/build.sh"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 11416,
          "end": 11420
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 11421,
          "end": 11433
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 11434,
            "end": 11436
          }
        },
        {
          "span": {
            "start": 11437,
            "end": 11445
          },
          "value": "registry"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 11446,
          "end": 11453
        }
      },
      "arguments": {
        "span": {
          "start": 11454,
          "end": 11492
        },
        "value": "/go/src/github.com/docker/distribution"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 11493,
          "end": 11496
        }
      },
      "arguments": {
        "span": {
          "start": 11497,
          "end": 11513
        },
        "value": "REGISTRY_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 11514,
          "end": 11517
        }
      },
      "options": [
        {
          "flag_start": 11518,
          "name": {
            "span": {
              "start": 11520,
              "end": 11532
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 11533,
              "end": 11537
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 11538,
              "end": 11606
            },
            "value": "\"https://github.com/distribution/distribution.git#$REGISTRY_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 11607,
          "end": 11608
        },
        "value": "."
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 11609,
          "end": 11612
        }
      },
      "arguments": {
        "span": {
          "start": 11613,
          "end": 11627
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 11628,
          "end": 11631
        }
      },
      "options": [
        {
          "flag_start": 11632,
          "name": {
            "span": {
              "start": 11634,
              "end": 11639
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 11640,
              "end": 11670
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 11676,
            "end": 11676
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 11677,
            "end": 11949
          },
          "expand": true,
          "value": "  set -ex\n  mkdir /out\n  export GOPATH=\"$(pwd)/Godeps/_workspace:$GOPATH\"\n  GO111MODULE=off CGO_ENABLED=0 xx-go build -o /out/registry ./cmd/registry\n  xx-verify --static /out/registry\n  if [ \"$(xx-info os)\" = \"windows\" ]; then\n    mv /out/registry /out/registry.exe\n  fi\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 11954,
          "end": 11958
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 11959,
          "end": 11971
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 11972,
            "end": 11974
          }
        },
        {
          "span": {
            "start": 11975,
            "end": 11986
          },
          "value": "rootlesskit"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 11987,
          "end": 11994
        }
      },
      "arguments": {
        "span": {
          "start": 11995,
          "end": 12045
        },
        "value": "/go/src/github.com/rootless-containers/rootlesskit"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 12046,
          "end": 12049
        }
      },
      "arguments": {
        "span": {
          "start": 12050,
          "end": 12069
        },
        "value": "ROOTLESSKIT_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 12070,
          "end": 12073
        }
      },
      "options": [
        {
          "flag_start": 12074,
          "name": {
            "span": {
              "start": 12076,
              "end": 12088
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 12089,
              "end": 12093
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 12094,
              "end": 12171
            },
            "value": "\"https://github.com/rootless-containers/rootlesskit.git#$ROOTLESSKIT_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 12172,
          "end": 12173
        },
        "value": "."
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 12174,
          "end": 12177
        }
      },
      "arguments": {
        "span": {
          "start": 12178,
          "end": 12192
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 12193,
          "end": 12196
        }
      },
      "options": [
        {
          "flag_start": 12198,
          "name": {
            "span": {
              "start": 12200,
              "end": 12205
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 12206,
              "end": 12236
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 12241,
            "end": 12339
          },
          "value": "CGO_ENABLED=0 xx-go build -o /rootlesskit ./cmd/rootlesskit && \\\n  xx-verify --static /rootlesskit"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 12341,
          "end": 12345
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 12346,
          "end": 12358
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 12359,
            "end": 12361
          }
        },
        {
          "span": {
            "start": 12362,
            "end": 12380
          },
          "value": "stargz-snapshotter"
        }
      ]
    },
    {
      "kind": "WORKDIR",
      "workdir": {
        "span": {
          "start": 12381,
          "end": 12388
        }
      },
      "arguments": {
        "span": {
          "start": 12389,
          "end": 12437
        },
        "value": "/go/src/github.com/containerd/stargz-snapshotter"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 12438,
          "end": 12441
        }
      },
      "arguments": {
        "span": {
          "start": 12442,
          "end": 12468
        },
        "value": "STARGZ_SNAPSHOTTER_VERSION"
      }
    },
    {
      "kind": "ADD",
      "add": {
        "span": {
          "start": 12469,
          "end": 12472
        }
      },
      "options": [
        {
          "flag_start": 12473,
          "name": {
            "span": {
              "start": 12475,
              "end": 12487
            },
            "value": "keep-git-dir"
          },
          "value": {
            "span": {
              "start": 12488,
              "end": 12492
            },
            "value": "true"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 12493,
              "end": 12575
            },
            "value": "\"https://github.com/containerd/stargz-snapshotter.git#$STARGZ_SNAPSHOTTER_VERSION\""
          }
        }
      ],
      "dest": {
        "span": {
          "start": 12576,
          "end": 12577
        },
        "value": "."
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 12578,
          "end": 12581
        }
      },
      "arguments": {
        "span": {
          "start": 12582,
          "end": 12596
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 12597,
          "end": 12600
        }
      },
      "options": [
        {
          "flag_start": 12601,
          "name": {
            "span": {
              "start": 12603,
              "end": 12608
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 12609,
              "end": 12639
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 12644,
            "end": 12805
          },
          "value": "xx-go --wrap && \\\n  mkdir /out && CGO_ENABLED=0 PREFIX=/out/ make && \\\n  xx-verify --static /out/containerd-stargz-grpc && \\\n  xx-verify --static /out/ctr-remote"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 12807,
          "end": 12811
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 12812,
          "end": 12824
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 12825,
            "end": 12827
          }
        },
        {
          "span": {
            "start": 12828,
            "end": 12833
          },
          "value": "nydus"
        }
      ]
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 12834,
          "end": 12837
        }
      },
      "arguments": {
        "span": {
          "start": 12838,
          "end": 12851
        },
        "value": "NYDUS_VERSION"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 12852,
          "end": 12855
        }
      },
      "arguments": {
        "span": {
          "start": 12856,
          "end": 12864
        },
        "value": "TARGETOS"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 12865,
          "end": 12868
        }
      },
      "arguments": {
        "span": {
          "start": 12869,
          "end": 12879
        },
        "value": "TARGETARCH"
      }
    },
    {
      "kind": "SHELL",
      "shell": {
        "span": {
          "start": 12880,
          "end": 12885
        }
      },
      "arguments": [
        {
          "span": {
            "start": 12888,
            "end": 12897
          },
          "value": "/bin/bash"
        },
        {
          "span": {
            "start": 12901,
            "end": 12903
          },
          "value": "-c"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 12906,
          "end": 12909
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 12910,
            "end": 13039
          },
          "value": "wget https://github.com/dragonflyoss/nydus/releases/download/$NYDUS_VERSION/nydus-static-$NYDUS_VERSION-$TARGETOS-$TARGETARCH.tgz"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 13040,
          "end": 13043
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 13044,
            "end": 13144
          },
          "value": "mkdir -p /out/nydus-static && tar xzvf nydus-static-$NYDUS_VERSION-$TARGETOS-$TARGETARCH.tgz -C /out"
        }
      },
      "here_docs": []
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 13146,
          "end": 13150
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 13151,
          "end": 13163
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 13164,
            "end": 13166
          }
        },
        {
          "span": {
            "start": 13167,
            "end": 13176
          },
          "value": "gotestsum"
        }
      ]
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 13177,
          "end": 13180
        }
      },
      "arguments": {
        "span": {
          "start": 13181,
          "end": 13198
        },
        "value": "GOTESTSUM_VERSION"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 13199,
          "end": 13202
        }
      },
      "arguments": {
        "span": {
          "start": 13203,
          "end": 13217
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 13218,
          "end": 13221
        }
      },
      "options": [
        {
          "flag_start": 13222,
          "name": {
            "span": {
              "start": 13224,
              "end": 13229
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 13230,
              "end": 13260
            },
            "value": "target=/root/.cache,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 13266,
            "end": 13266
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 13267,
            "end": 13607
          },
          "expand": true,
          "value": "  set -ex\n  xx-go install \"gotest.tools/gotestsum@${GOTESTSUM_VERSION}\"\n  xx-go install \"github.com/wadey/gocovmerge@latest\"\n  mkdir /out\n  if ! xx-info is-cross; then\n    /go/bin/gotestsum --version\n    mv /go/bin/gotestsum /out\n    mv /go/bin/gocovmerge /out\n  else\n    mv /go/bin/*/gotestsum* /out\n    mv /go/bin/*/gocovmerge* /out\n  fi\n"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 13611,
          "end": 13615
        }
      },
      "options": [
        {
          "flag_start": 13616,
          "name": {
            "span": {
              "start": 13618,
              "end": 13623
            },
            "value": "chmod"
          },
          "value": {
            "span": {
              "start": 13624,
              "end": 13627
            },
            "value": "755"
          }
        }
      ],
      "src": [
        {
          "here_doc": {
            "span": {
              "start": 13659,
              "end": 14232
            },
            "expand": false,
            "value": "#!/bin/sh\nset -x\nif [ -z \"$GO_TEST_COVERPROFILE\" ]; then\n  exec gotestsum \"$@\"\nfi\ncoverdir=\"$(dirname \"$GO_TEST_COVERPROFILE\")\"\nmkdir -p \"$coverdir/helpers\"\ngotestsum \"$@\" \"-coverprofile=$GO_TEST_COVERPROFILE\"\necode=$?\ngo tool covdata textfmt -i=$coverdir/helpers -o=$coverdir/helpers-report.txt\ngocovmerge \"$coverdir/helpers-report.txt\" \"$GO_TEST_COVERPROFILE\" > \"$coverdir/merged-report.txt\"\nmv \"$coverdir/merged-report.txt\" \"$GO_TEST_COVERPROFILE\"\nrm \"$coverdir/helpers-report.txt\"\nfor f in \"$coverdir/helpers\"/*; do\n  rm \"$f\"\ndone\nrmdir \"$coverdir/helpers\"\nexit $ecode\n"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 13636,
          "end": 13658
        },
        "value": "/out/gotestsumandcover"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 14281,
          "end": 14285
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 14286,
          "end": 14298
        },
        "value": "gobuild-base"
      },
      "as_": [
        {
          "span": {
            "start": 14299,
            "end": 14301
          }
        },
        {
          "span": {
            "start": 14302,
            "end": 14305
          },
          "value": "dlv"
        }
      ]
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 14306,
          "end": 14309
        }
      },
      "arguments": {
        "span": {
          "start": 14310,
          "end": 14323
        },
        "value": "DELVE_VERSION"
      }
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 14324,
          "end": 14327
        }
      },
      "arguments": {
        "span": {
          "start": 14328,
          "end": 14342
        },
        "value": "TARGETPLATFORM"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 14343,
          "end": 14346
        }
      },
      "options": [
        {
          "flag_start": 14347,
          "name": {
            "span": {
              "start": 14349,
              "end": 14354
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 14355,
              "end": 14387
            },
            "value": "target=/root/.cache,type=cache"
          }
        },
        {
          "flag_start": 14391,
          "name": {
            "span": {
              "start": 14393,
              "end": 14398
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 14399,
              "end": 14428
            },
            "value": "target=/go/pkg/mod,type=cache"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 14434,
            "end": 14434
          },
          "value": ""
        }
      },
      "here_docs": [
        {
          "span": {
            "start": 14435,
            "end": 14834
          },
          "expand": true,
          "value": "  set -ex\n  mkdir /out\n  if [ \"$(xx-info os)\" = \"freebsd\" ]; then\n    echo \"WARN: dlv requires cgo enabled on FreeBSD, skipping: https://github.com/moby/buildkit/pull/5497#issuecomment-2462031339\"\n    exit 0\n  fi\n  xx-go install \"github.com/go-delve/delve/cmd/dlv@${DELVE_VERSION}\"\n  if ! xx-info is-cross; then\n    /go/bin/dlv version\n    mv /go/bin/dlv /out\n  else\n    mv /go/bin/*/dlv* /out\n  fi\n"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 14839,
          "end": 14843
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 14844,
          "end": 14859
        },
        "value": "buildkit-export"
      },
      "as_": [
        {
          "span": {
            "start": 14860,
            "end": 14862
          }
        },
        {
          "span": {
            "start": 14863,
            "end": 14877
          },
          "value": "buildkit-linux"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 14878,
          "end": 14882
        }
      },
      "options": [
        {
          "flag_start": 14883,
          "name": {
            "span": {
              "start": 14885,
              "end": 14889
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 14890,
          "name": {
            "span": {
              "start": 14892,
              "end": 14896
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 14897,
              "end": 14905
            },
            "value": "binaries"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 14906,
              "end": 14907
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 14908,
          "end": 14917
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 14918,
          "end": 14921
        }
      },
      "arguments": {
        "span": {
          "start": 14922,
          "end": 14952
        },
        "value": "BUILDKIT_SETUP_CGROUPV2_ROOT=1"
      }
    },
    {
      "kind": "ENTRYPOINT",
      "entrypoint": {
        "span": {
          "start": 14953,
          "end": 14963
        }
      },
      "arguments": {
        "exec": {
          "span": {
            "start": 14964,
            "end": 14977
          },
          "value": [
            {
              "span": {
                "start": 14966,
                "end": 14975
              },
              "value": "buildkitd"
            }
          ]
        }
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 14979,
          "end": 14983
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 14984,
          "end": 14998
        },
        "value": "buildkit-linux"
      },
      "as_": [
        {
          "span": {
            "start": 14999,
            "end": 15001
          }
        },
        {
          "span": {
            "start": 15002,
            "end": 15022
          },
          "value": "buildkit-linux-debug"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 15023,
          "end": 15027
        }
      },
      "options": [
        {
          "flag_start": 15028,
          "name": {
            "span": {
              "start": 15030,
              "end": 15034
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 15035,
          "name": {
            "span": {
              "start": 15037,
              "end": 15041
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 15042,
              "end": 15045
            },
            "value": "dlv"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 15046,
              "end": 15054
            },
            "value": "/out/dlv"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 15055,
          "end": 15067
        },
        "value": "/usr/bin/dlv"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 15068,
          "end": 15072
        }
      },
      "options": [
        {
          "flag_start": 15073,
          "name": {
            "span": {
              "start": 15075,
              "end": 15079
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 15080,
          "name": {
            "span": {
              "start": 15082,
              "end": 15087
            },
            "value": "chmod"
          },
          "value": {
            "span": {
              "start": 15088,
              "end": 15091
            },
            "value": "755"
          }
        }
      ],
      "src": [
        {
          "here_doc": {
            "span": {
              "start": 15120,
              "end": 15298
            },
            "expand": true,
            "value": "#!/bin/sh\nexec dlv exec /usr/bin/buildkitd \\\\\n  --api-version=2 \\\\\n  -l 0.0.0.0:\\${DELVE_PORT:-5000} \\\\\n  --headless=true \\\\\n  --accept-multiclient \\\\\n  --continue \\\\\n  -- \"\\$@\"\n"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 15098,
          "end": 15119
        },
        "value": "/docker-entrypoint.sh"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 15302,
          "end": 15305
        }
      },
      "arguments": {
        "span": {
          "start": 15306,
          "end": 15321
        },
        "value": "DELVE_PORT=5000"
      }
    },
    {
      "kind": "ENTRYPOINT",
      "entrypoint": {
        "span": {
          "start": 15322,
          "end": 15332
        }
      },
      "arguments": {
        "exec": {
          "span": {
            "start": 15333,
            "end": 15358
          },
          "value": [
            {
              "span": {
                "start": 15335,
                "end": 15356
              },
              "value": "/docker-entrypoint.sh"
            }
          ]
        }
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 15360,
          "end": 15364
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 15365,
          "end": 15373
        },
        "value": "binaries"
      },
      "as_": [
        {
          "span": {
            "start": 15374,
            "end": 15376
          }
        },
        {
          "span": {
            "start": 15377,
            "end": 15392
          },
          "value": "buildkit-darwin"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 15394,
          "end": 15398
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 15399,
          "end": 15407
        },
        "value": "binaries"
      },
      "as_": [
        {
          "span": {
            "start": 15408,
            "end": 15410
          }
        },
        {
          "span": {
            "start": 15411,
            "end": 15427
          },
          "value": "buildkit-freebsd"
        }
      ]
    },
    {
      "kind": "ENTRYPOINT",
      "entrypoint": {
        "span": {
          "start": 15428,
          "end": 15438
        }
      },
      "arguments": {
        "exec": {
          "span": {
            "start": 15439,
            "end": 15453
          },
          "value": [
            {
              "span": {
                "start": 15441,
                "end": 15451
              },
              "value": "/buildkitd"
            }
          ]
        }
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 15455,
          "end": 15459
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 15460,
          "end": 15468
        },
        "value": "binaries"
      },
      "as_": [
        {
          "span": {
            "start": 15469,
            "end": 15471
          }
        },
        {
          "span": {
            "start": 15472,
            "end": 15488
          },
          "value": "buildkit-windows"
        }
      ]
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 15490,
          "end": 15494
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 15495,
          "end": 15502
        },
        "value": "scratch"
      },
      "as_": [
        {
          "span": {
            "start": 15503,
            "end": 15505
          }
        },
        {
          "span": {
            "start": 15506,
            "end": 15523
          },
          "value": "binaries-for-test"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 15524,
          "end": 15528
        }
      },
      "options": [
        {
          "flag_start": 15529,
          "name": {
            "span": {
              "start": 15531,
              "end": 15535
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 15536,
          "name": {
            "span": {
              "start": 15538,
              "end": 15542
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 15543,
              "end": 15552
            },
            "value": "gotestsum"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 15553,
              "end": 15557
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 15558,
          "end": 15559
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 15560,
          "end": 15564
        }
      },
      "options": [
        {
          "flag_start": 15565,
          "name": {
            "span": {
              "start": 15567,
              "end": 15571
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 15572,
          "name": {
            "span": {
              "start": 15574,
              "end": 15578
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 15579,
              "end": 15582
            },
            "value": "dlv"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 15583,
              "end": 15587
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 15588,
          "end": 15589
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 15590,
          "end": 15594
        }
      },
      "options": [
        {
          "flag_start": 15595,
          "name": {
            "span": {
              "start": 15597,
              "end": 15601
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 15602,
          "name": {
            "span": {
              "start": 15604,
              "end": 15608
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 15609,
              "end": 15617
            },
            "value": "registry"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 15618,
              "end": 15622
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 15623,
          "end": 15624
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 15625,
          "end": 15629
        }
      },
      "options": [
        {
          "flag_start": 15630,
          "name": {
            "span": {
              "start": 15632,
              "end": 15636
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 15637,
          "name": {
            "span": {
              "start": 15639,
              "end": 15643
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 15644,
              "end": 15654
            },
            "value": "containerd"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 15655,
              "end": 15659
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 15660,
          "end": 15661
        },
        "value": "/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 15662,
          "end": 15666
        }
      },
      "options": [
        {
          "flag_start": 15667,
          "name": {
            "span": {
              "start": 15669,
              "end": 15673
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 15674,
          "name": {
            "span": {
              "start": 15676,
              "end": 15680
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 15681,
              "end": 15689
            },
            "value": "binaries"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 15690,
              "end": 15691
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 15692,
          "end": 15693
        },
        "value": "/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 15695,
          "end": 15699
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 15700,
          "end": 15713
        },
        "value": "buildkit-base"
      },
      "as_": [
        {
          "span": {
            "start": 15714,
            "end": 15716
          }
        },
        {
          "span": {
            "start": 15717,
            "end": 15739
          },
          "value": "integration-tests-base"
        }
      ]
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 15740,
          "end": 15743
        }
      },
      "arguments": {
        "span": {
          "start": 15744,
          "end": 15792
        },
        "value": "BUILDKIT_INTEGRATION_ROOTLESS_IDPAIR=\"1000:1000\""
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 15793,
          "end": 15796
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 15797,
            "end": 16280
          },
          "value": "apk add --no-cache shadow shadow-uidmap sudo vim iptables ip6tables dnsmasq fuse curl git-daemon openssh-client openssl slirp4netns iproute2 gpg gpg-agent \\\n  && useradd --create-home --home-dir /home/user --uid 1000 -s /bin/sh user \\\n  && echo \"XDG_RUNTIME_DIR=/run/user/1000; export XDG_RUNTIME_DIR\" >> /home/user/.profile \\\n  && mkdir -m 0700 -p /run/user/1000 \\\n  && chown -R user /run/user/1000 /home/user \\\n  && ln -s /sbin/iptables-legacy /usr/bin/iptables \\\n  && xx-go --wrap"
        }
      },
      "here_docs": []
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 16281,
          "end": 16284
        }
      },
      "arguments": {
        "span": {
          "start": 16285,
          "end": 16300
        },
        "value": "NERDCTL_VERSION"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 16301,
          "end": 16304
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 16305,
            "end": 16508
          },
          "value": "curl -fsSL https://raw.githubusercontent.com/containerd/nerdctl/$NERDCTL_VERSION/extras/rootless/containerd-rootless.sh > /usr/bin/containerd-rootless.sh \\\n  && chmod 0755 /usr/bin/containerd-rootless.sh"
        }
      },
      "here_docs": []
    },
    {
      "kind": "ARG",
      "arg": {
        "span": {
          "start": 16509,
          "end": 16512
        }
      },
      "arguments": {
        "span": {
          "start": 16513,
          "end": 16528
        },
        "value": "AZURITE_VERSION"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 16529,
          "end": 16532
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 16533,
            "end": 16611
          },
          "value": "apk add --no-cache nodejs npm \\\n  && npm install -g azurite@${AZURITE_VERSION}"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 16747,
          "end": 16750
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 16751,
            "end": 16887
          },
          "value": "curl -fsSL https://raw.githubusercontent.com/moby/moby/v25.0.1/hack/dind > /docker-entrypoint.sh \\\n  && chmod 0755 /docker-entrypoint.sh"
        }
      },
      "here_docs": []
    },
    {
      "kind": "ENTRYPOINT",
      "entrypoint": {
        "span": {
          "start": 16888,
          "end": 16898
        }
      },
      "arguments": {
        "exec": {
          "span": {
            "start": 16899,
            "end": 16924
          },
          "value": [
            {
              "span": {
                "start": 16901,
                "end": 16922
              },
              "value": "/docker-entrypoint.sh"
            }
          ]
        }
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 17002,
          "end": 17005
        }
      },
      "arguments": {
        "span": {
          "start": 17006,
          "end": 17129
        },
        "value": "BUILDKIT_INTEGRATION_CONTAINERD_EXTRA=\"containerd-2.1=/opt/containerd-alt-21/bin,containerd-1.7=/opt/containerd-alt-17/bin\""
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 17130,
          "end": 17133
        }
      },
      "arguments": {
        "span": {
          "start": 17134,
          "end": 17173
        },
        "value": "BUILDKIT_INTEGRATION_SNAPSHOTTER=stargz"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 17174,
          "end": 17177
        }
      },
      "arguments": {
        "span": {
          "start": 17178,
          "end": 17208
        },
        "value": "BUILDKIT_SETUP_CGROUPV2_ROOT=1"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 17209,
          "end": 17212
        }
      },
      "arguments": {
        "span": {
          "start": 17213,
          "end": 17273
        },
        "value": "BUILDKIT_TEST_SIGN_FIXTURES=/tmp/buildkit_test_sign_fixtures"
      }
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 17274,
          "end": 17277
        }
      },
      "options": [
        {
          "flag_start": 17278,
          "name": {
            "span": {
              "start": 17280,
              "end": 17285
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 17286,
              "end": 17358
            },
            "value": "target=/tmp/gen_gpg_test_env.sh,source=hack/fixtures/gen_gpg_test_env.sh"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 17359,
            "end": 17429
          },
          "value": "sh /tmp/gen_gpg_test_env.sh user1 && sh /tmp/gen_gpg_test_env.sh user2"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 17430,
          "end": 17433
        }
      },
      "options": [
        {
          "flag_start": 17434,
          "name": {
            "span": {
              "start": 17436,
              "end": 17441
            },
            "value": "mount"
          },
          "value": {
            "span": {
              "start": 17442,
              "end": 17514
            },
            "value": "target=/tmp/gen_ssh_test_env.sh,source=hack/fixtures/gen_ssh_test_env.sh"
          }
        }
      ],
      "arguments": {
        "shell": {
          "span": {
            "start": 17515,
            "end": 17585
          },
          "value": "sh /tmp/gen_ssh_test_env.sh user1 && sh /tmp/gen_ssh_test_env.sh user2"
        }
      },
      "here_docs": []
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 17586,
          "end": 17589
        }
      },
      "arguments": {
        "span": {
          "start": 17590,
          "end": 17603
        },
        "value": "CGO_ENABLED=0"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 17604,
          "end": 17607
        }
      },
      "arguments": {
        "span": {
          "start": 17608,
          "end": 17641
        },
        "value": "GOTESTSUM_FORMAT=standard-verbose"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17642,
          "end": 17646
        }
      },
      "options": [
        {
          "flag_start": 17647,
          "name": {
            "span": {
              "start": 17649,
              "end": 17653
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17654,
          "name": {
            "span": {
              "start": 17656,
              "end": 17660
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17661,
              "end": 17670
            },
            "value": "gotestsum"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17671,
              "end": 17675
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17676,
          "end": 17685
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17686,
          "end": 17690
        }
      },
      "options": [
        {
          "flag_start": 17691,
          "name": {
            "span": {
              "start": 17693,
              "end": 17697
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17698,
          "name": {
            "span": {
              "start": 17700,
              "end": 17704
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17705,
              "end": 17710
            },
            "value": "minio"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17711,
              "end": 17725
            },
            "value": "/usr/bin/minio"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17726,
          "end": 17735
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17736,
          "end": 17740
        }
      },
      "options": [
        {
          "flag_start": 17741,
          "name": {
            "span": {
              "start": 17743,
              "end": 17747
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17748,
          "name": {
            "span": {
              "start": 17750,
              "end": 17754
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17755,
              "end": 17763
            },
            "value": "minio-mc"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17764,
              "end": 17775
            },
            "value": "/usr/bin/mc"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17776,
          "end": 17785
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17786,
          "end": 17790
        }
      },
      "options": [
        {
          "flag_start": 17791,
          "name": {
            "span": {
              "start": 17793,
              "end": 17797
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17798,
          "name": {
            "span": {
              "start": 17800,
              "end": 17804
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17805,
              "end": 17810
            },
            "value": "nydus"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17811,
              "end": 17830
            },
            "value": "/out/nydus-static/*"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17831,
          "end": 17840
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17841,
          "end": 17845
        }
      },
      "options": [
        {
          "flag_start": 17846,
          "name": {
            "span": {
              "start": 17848,
              "end": 17852
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17853,
          "name": {
            "span": {
              "start": 17855,
              "end": 17859
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17860,
              "end": 17878
            },
            "value": "stargz-snapshotter"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17879,
              "end": 17885
            },
            "value": "/out/*"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17886,
          "end": 17895
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17896,
          "end": 17900
        }
      },
      "options": [
        {
          "flag_start": 17901,
          "name": {
            "span": {
              "start": 17903,
              "end": 17907
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17908,
          "name": {
            "span": {
              "start": 17910,
              "end": 17914
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17915,
              "end": 17926
            },
            "value": "rootlesskit"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17927,
              "end": 17939
            },
            "value": "/rootlesskit"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 17940,
          "end": 17949
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 17950,
          "end": 17954
        }
      },
      "options": [
        {
          "flag_start": 17955,
          "name": {
            "span": {
              "start": 17957,
              "end": 17961
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 17962,
          "name": {
            "span": {
              "start": 17964,
              "end": 17968
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 17969,
              "end": 17986
            },
            "value": "containerd-alt-21"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 17987,
              "end": 18003
            },
            "value": "/out/containerd*"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18004,
          "end": 18031
        },
        "value": "/opt/containerd-alt-21/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18032,
          "end": 18036
        }
      },
      "options": [
        {
          "flag_start": 18037,
          "name": {
            "span": {
              "start": 18039,
              "end": 18043
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 18044,
          "name": {
            "span": {
              "start": 18046,
              "end": 18050
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 18051,
              "end": 18068
            },
            "value": "containerd-alt-17"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18069,
              "end": 18085
            },
            "value": "/out/containerd*"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18086,
          "end": 18113
        },
        "value": "/opt/containerd-alt-17/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18114,
          "end": 18118
        }
      },
      "options": [
        {
          "flag_start": 18119,
          "name": {
            "span": {
              "start": 18121,
              "end": 18125
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 18126,
          "name": {
            "span": {
              "start": 18128,
              "end": 18132
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 18133,
              "end": 18141
            },
            "value": "registry"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18142,
              "end": 18146
            },
            "value": "/out"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18147,
          "end": 18156
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18157,
          "end": 18161
        }
      },
      "options": [
        {
          "flag_start": 18162,
          "name": {
            "span": {
              "start": 18164,
              "end": 18168
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 18169,
          "name": {
            "span": {
              "start": 18171,
              "end": 18175
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 18176,
              "end": 18180
            },
            "value": "runc"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18181,
              "end": 18194
            },
            "value": "/usr/bin/runc"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18195,
          "end": 18204
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18205,
          "end": 18209
        }
      },
      "options": [
        {
          "flag_start": 18210,
          "name": {
            "span": {
              "start": 18212,
              "end": 18216
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 18217,
          "name": {
            "span": {
              "start": 18219,
              "end": 18223
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 18224,
              "end": 18234
            },
            "value": "containerd"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18235,
              "end": 18251
            },
            "value": "/out/containerd*"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18252,
          "end": 18261
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18262,
          "end": 18266
        }
      },
      "options": [
        {
          "flag_start": 18267,
          "name": {
            "span": {
              "start": 18269,
              "end": 18273
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 18274,
          "name": {
            "span": {
              "start": 18276,
              "end": 18280
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 18281,
              "end": 18294
            },
            "value": "docker-engine"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18295,
              "end": 18296
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18297,
          "end": 18306
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18307,
          "end": 18311
        }
      },
      "options": [
        {
          "flag_start": 18312,
          "name": {
            "span": {
              "start": 18314,
              "end": 18318
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 18319,
          "name": {
            "span": {
              "start": 18321,
              "end": 18325
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 18326,
              "end": 18336
            },
            "value": "docker-cli"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18337,
              "end": 18338
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18339,
          "end": 18348
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18349,
          "end": 18353
        }
      },
      "options": [
        {
          "flag_start": 18354,
          "name": {
            "span": {
              "start": 18356,
              "end": 18360
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 18361,
          "name": {
            "span": {
              "start": 18363,
              "end": 18367
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 18368,
              "end": 18381
            },
            "value": "docker-buildx"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18382,
              "end": 18389
            },
            "value": "/buildx"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18390,
          "end": 18435
        },
        "value": "/usr/libexec/docker/cli-plugins/docker-buildx"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18436,
          "end": 18440
        }
      },
      "options": [
        {
          "flag_start": 18441,
          "name": {
            "span": {
              "start": 18443,
              "end": 18447
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 18448,
          "name": {
            "span": {
              "start": 18450,
              "end": 18454
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 18455,
              "end": 18466
            },
            "value": "cni-plugins"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18467,
              "end": 18486
            },
            "value": "/opt/cni/bin/bridge"
          }
        },
        {
          "path": {
            "span": {
              "start": 18487,
              "end": 18510
            },
            "value": "/opt/cni/bin/host-local"
          }
        },
        {
          "path": {
            "span": {
              "start": 18511,
              "end": 18532
            },
            "value": "/opt/cni/bin/loopback"
          }
        },
        {
          "path": {
            "span": {
              "start": 18533,
              "end": 18554
            },
            "value": "/opt/cni/bin/firewall"
          }
        },
        {
          "path": {
            "span": {
              "start": 18555,
              "end": 18575
            },
            "value": "/opt/cni/bin/dnsname"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18576,
          "end": 18589
        },
        "value": "/opt/cni/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18590,
          "end": 18594
        }
      },
      "options": [
        {
          "flag_start": 18595,
          "name": {
            "span": {
              "start": 18597,
              "end": 18601
            },
            "value": "link"
          },
          "value": null
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18602,
              "end": 18624
            },
            "value": "hack/fixtures/cni.json"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18625,
          "end": 18647
        },
        "value": "/etc/buildkit/cni.json"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18648,
          "end": 18652
        }
      },
      "options": [
        {
          "flag_start": 18653,
          "name": {
            "span": {
              "start": 18655,
              "end": 18659
            },
            "value": "link"
          },
          "value": null
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18660,
              "end": 18690
            },
            "value": "hack/fixtures/dns-cni.conflist"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18691,
          "end": 18721
        },
        "value": "/etc/buildkit/dns-cni.conflist"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18722,
          "end": 18726
        }
      },
      "options": [
        {
          "flag_start": 18727,
          "name": {
            "span": {
              "start": 18729,
              "end": 18733
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 18734,
          "name": {
            "span": {
              "start": 18736,
              "end": 18740
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 18741,
              "end": 18749
            },
            "value": "binaries"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 18750,
              "end": 18751
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18752,
          "end": 18761
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 18832,
          "end": 18836
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 18837,
          "end": 18859
        },
        "value": "integration-tests-base"
      },
      "as_": [
        {
          "span": {
            "start": 18860,
            "end": 18862
          }
        },
        {
          "span": {
            "start": 18863,
            "end": 18880
          },
          "value": "integration-tests"
        }
      ]
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 18881,
          "end": 18885
        }
      },
      "options": [],
      "src": [
        {
          "path": {
            "span": {
              "start": 18886,
              "end": 18887
            },
            "value": "."
          }
        }
      ],
      "dest": {
        "span": {
          "start": 18888,
          "end": 18889
        },
        "value": "."
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 18890,
          "end": 18893
        }
      },
      "arguments": {
        "span": {
          "start": 18894,
          "end": 18992
        },
        "value": "BUILDKIT_RUN_NETWORK_INTEGRATION_TESTS=1 BUILDKIT_CNI_INIT_LOCK_PATH=/run/buildkit_cni_bridge.lock"
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 18994,
          "end": 18998
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 18999,
          "end": 19016
        },
        "value": "integration-tests"
      },
      "as_": [
        {
          "span": {
            "start": 19017,
            "end": 19019
          }
        },
        {
          "span": {
            "start": 19020,
            "end": 19027
          },
          "value": "dev-env"
        }
      ]
    },
    {
      "kind": "VOLUME",
      "volume": {
        "span": {
          "start": 19028,
          "end": 19034
        }
      },
      "arguments": {
        "string": [
          {
            "span": {
              "start": 19035,
              "end": 19052
            },
            "value": "/var/lib/buildkit"
          }
        ]
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 19110,
          "end": 19114
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 19115,
          "end": 19139
        },
        "value": "alpine:${ALPINE_VERSION}"
      },
      "as_": [
        {
          "span": {
            "start": 19140,
            "end": 19142
          }
        },
        {
          "span": {
            "start": 19143,
            "end": 19151
          },
          "value": "rootless"
        }
      ]
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 19152,
          "end": 19155
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 19156,
            "end": 19237
          },
          "value": "apk add --no-cache fuse3 fuse-overlayfs git openssh openssl pigz shadow-uidmap xz"
        }
      },
      "here_docs": []
    },
    {
      "kind": "RUN",
      "run": {
        "span": {
          "start": 19238,
          "end": 19241
        }
      },
      "options": [],
      "arguments": {
        "shell": {
          "span": {
            "start": 19242,
            "end": 19464
          },
          "value": "adduser -D -u 1000 user \\\n  && mkdir -p /run/user/1000 /home/user/.local/tmp /home/user/.local/share/buildkit \\\n  && chown -R user /run/user/1000 /home/user \\\n  && echo user:100000:65536 | tee /etc/subuid | tee /etc/subgid"
        }
      },
      "here_docs": []
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 19465,
          "end": 19469
        }
      },
      "options": [
        {
          "flag_start": 19470,
          "name": {
            "span": {
              "start": 19472,
              "end": 19476
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 19477,
          "name": {
            "span": {
              "start": 19479,
              "end": 19483
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 19484,
              "end": 19495
            },
            "value": "rootlesskit"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 19496,
              "end": 19508
            },
            "value": "/rootlesskit"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 19509,
          "end": 19518
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 19519,
          "end": 19523
        }
      },
      "options": [
        {
          "flag_start": 19524,
          "name": {
            "span": {
              "start": 19526,
              "end": 19530
            },
            "value": "link"
          },
          "value": null
        },
        {
          "flag_start": 19531,
          "name": {
            "span": {
              "start": 19533,
              "end": 19537
            },
            "value": "from"
          },
          "value": {
            "span": {
              "start": 19538,
              "end": 19546
            },
            "value": "binaries"
          }
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 19547,
              "end": 19548
            },
            "value": "/"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 19549,
          "end": 19558
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "COPY",
      "copy": {
        "span": {
          "start": 19559,
          "end": 19563
        }
      },
      "options": [
        {
          "flag_start": 19564,
          "name": {
            "span": {
              "start": 19566,
              "end": 19570
            },
            "value": "link"
          },
          "value": null
        }
      ],
      "src": [
        {
          "path": {
            "span": {
              "start": 19571,
              "end": 19622
            },
            "value": "examples/buildctl-daemonless/buildctl-daemonless.sh"
          }
        }
      ],
      "dest": {
        "span": {
          "start": 19623,
          "end": 19632
        },
        "value": "/usr/bin/"
      }
    },
    {
      "kind": "USER",
      "user": {
        "span": {
          "start": 19687,
          "end": 19691
        }
      },
      "arguments": {
        "span": {
          "start": 19692,
          "end": 19701
        },
        "value": "1000:1000"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 19702,
          "end": 19705
        }
      },
      "arguments": {
        "span": {
          "start": 19706,
          "end": 19721
        },
        "value": "HOME=/home/user"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 19722,
          "end": 19725
        }
      },
      "arguments": {
        "span": {
          "start": 19726,
          "end": 19735
        },
        "value": "USER=user"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 19736,
          "end": 19739
        }
      },
      "arguments": {
        "span": {
          "start": 19740,
          "end": 19770
        },
        "value": "XDG_RUNTIME_DIR=/run/user/1000"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 19771,
          "end": 19774
        }
      },
      "arguments": {
        "span": {
          "start": 19775,
          "end": 19803
        },
        "value": "TMPDIR=/home/user/.local/tmp"
      }
    },
    {
      "kind": "ENV",
      "env": {
        "span": {
          "start": 19804,
          "end": 19807
        }
      },
      "arguments": {
        "span": {
          "start": 19808,
          "end": 19867
        },
        "value": "BUILDKIT_HOST=unix:///run/user/1000/buildkit/buildkitd.sock"
      }
    },
    {
      "kind": "VOLUME",
      "volume": {
        "span": {
          "start": 19868,
          "end": 19874
        }
      },
      "arguments": {
        "string": [
          {
            "span": {
              "start": 19875,
              "end": 19907
            },
            "value": "/home/user/.local/share/buildkit"
          }
        ]
      }
    },
    {
      "kind": "ENTRYPOINT",
      "entrypoint": {
        "span": {
          "start": 19908,
          "end": 19918
        }
      },
      "arguments": {
        "exec": {
          "span": {
            "start": 19919,
            "end": 19947
          },
          "value": [
            {
              "span": {
                "start": 19921,
                "end": 19932
              },
              "value": "rootlesskit"
            },
            {
              "span": {
                "start": 19936,
                "end": 19945
              },
              "value": "buildkitd"
            }
          ]
        }
      }
    },
    {
      "kind": "FROM",
      "from": {
        "span": {
          "start": 19996,
          "end": 20000
        }
      },
      "options": [],
      "image": {
        "span": {
          "start": 20001,
          "end": 20044
        },
        "value": "buildkit-$TARGETOS${BUILDKIT_DEBUG:+-debug}"
      },
      "as_": [
        {
          "span": {
            "start": 20045,
            "end": 20047
          }
        },
        {
          "span": {
            "start": 20048,
            "end": 20056
          },
          "value": "buildkit"
        }
      ]
    }
  ]
}